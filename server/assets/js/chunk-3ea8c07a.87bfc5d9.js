(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ea8c07a"],{1125:function(t,e,n){"use strict";var s=n("1988"),i=n("a142"),a=n("f253"),o=n("1b10"),r=Object(i["i"])("area"),c=r[0],u=r[1];e["a"]=c({props:Object(s["a"])({},o["a"],{value:String,areaList:{type:Object,default:function(){return{}}},columnsNum:{type:[String,Number],default:3}}),data:function(){return{code:this.value,columns:[{values:[]},{values:[]},{values:[]}]}},computed:{province:function(){return this.areaList.province_list||{}},city:function(){return this.areaList.city_list||{}},county:function(){return this.areaList.county_list||{}},displayColumns:function(){return this.columns.slice(0,+this.columnsNum)}},watch:{value:function(){this.code=this.value,this.setValues()},areaList:{deep:!0,handler:function(){this.setValues()}},columnsNum:function(){var t=this;this.$nextTick(function(){t.setValues()})}},mounted:function(){this.setValues()},methods:{getList:function(t,e){var n=[];if("province"!==t&&!e)return n;var s=this[t];return n=Object.keys(s).map(function(t){return{code:t,name:s[t]}}),e&&("9"===e[0]&&"city"===t&&(e="9"),n=n.filter(function(t){return 0===t.code.indexOf(e)})),n},getIndex:function(t,e){var n="province"===t?2:"city"===t?4:6,s=this.getList(t,e.slice(0,n-2));"9"===e[0]&&"province"===t&&(n=1),e=e.slice(0,n);for(var i=0;i<s.length;i++)if(s[i].code.slice(0,n)===e)return i;return 0},onChange:function(t,e,n){this.code=e[n].code,this.setValues(),this.$emit("change",t,t.getValues(),n)},setValues:function(){var t=this.code||Object.keys(this.county)[0]||"",e=this.$refs.picker,n=this.getList("province"),s=this.getList("city",t.slice(0,2));e&&(e.setColumnValues(0,n),e.setColumnValues(1,s),s.length&&"00"===t.slice(2,4)&&(t=s[0].code),e.setColumnValues(2,this.getList("county",t.slice(0,4))),e.setIndexes([this.getIndex("province",t),this.getIndex("city",t),this.getIndex("county",t)]))},getValues:function(){return this.$refs.picker?this.$refs.picker.getValues().filter(function(t){return!!t}):[]},getArea:function(){var t=this.getValues(),e={code:"",country:"",province:"",city:"",county:""};if(!t.length)return e;var n=t.map(function(t){return t.name});return e.code=t[t.length-1].code,"9"===e.code[0]?(e.country=n[1]||"",e.province=n[2]||""):(e.province=n[0]||"",e.city=n[1]||"",e.county=n[2]||""),e},reset:function(){this.code="",this.setValues()}},render:function(t){var e=Object(s["a"])({},this.$listeners,{change:this.onChange});return t(a["a"],{ref:"picker",class:u(),attrs:{showToolbar:!0,valueKey:"name",title:this.title,loading:this.loading,columns:this.displayColumns,itemHeight:this.itemHeight,visibleItemCount:this.visibleItemCount,cancelButtonText:this.cancelButtonText,confirmButtonText:this.confirmButtonText},on:Object(s["a"])({},e)})}})},"1b10":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var s={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44}}},"2cd5":function(t,e,n){"use strict";var s=n("9057"),i=n.n(s);i.a},"80f3":function(t,e,n){"use strict";var s=n("9872"),i=n.n(s);i.a},"8a58":function(t,e,n){"use strict";n("68ef"),n("4d75")},9057:function(t,e,n){},9872:function(t,e,n){},a526:function(t,e,n){},d2b7:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"address-detail"},[n("div",{staticClass:"detail-cell"},[n("div",{staticClass:"cell-title"},[t._v("姓名")]),n("div",{staticClass:"cell-content"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.addressInfo.name,expression:"addressInfo.name"},{name:"inputfix",rawName:"v-inputfix"}],attrs:{type:"text",maxlength:"40"},domProps:{value:t.addressInfo.name},on:{input:function(e){e.target.composing||t.$set(t.addressInfo,"name",e.target.value)}}})])]),n("div",{staticClass:"detail-cell"},[n("div",{staticClass:"cell-title"},[t._v("联系方式")]),n("div",{staticClass:"cell-content",class:{"warn-tip":!0!==t.checkPhone}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.addressInfo.phone,expression:"addressInfo.phone"},{name:"inputfix",rawName:"v-inputfix"}],attrs:{type:"tel",maxlength:"11"},domProps:{value:t.addressInfo.phone},on:{change:t.checkPhoneNum,input:function(e){e.target.composing||t.$set(t.addressInfo,"phone",e.target.value)}}})])]),n("div",{staticClass:"detail-cell"},[n("div",{staticClass:"cell-title"},[t._v("地区")]),n("div",{staticClass:"cell-content area",on:{click:function(e){t.showAreaList=!0}}},[n("span",{domProps:{textContent:t._s(t.addressInfo.province+t.addressInfo.city+t.addressInfo.district)}})])]),n("div",{staticClass:"detail-cell"},[n("div",{staticClass:"cell-title"},[t._v("详细地址")]),n("div",{staticClass:"cell-content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.addressInfo.detail,expression:"addressInfo.detail"},{name:"inputfix",rawName:"v-inputfix"}],staticClass:"detail-address",attrs:{type:"text"},domProps:{value:t.addressInfo.detail},on:{input:function(e){e.target.composing||t.$set(t.addressInfo,"detail",e.target.value)}}})])]),n("div",{staticClass:"van-checkbox",on:{click:function(e){1===t.setDefault?t.setDefault=0:t.setDefault=1}}},[n("i",{staticClass:"van-checkbox__icon van-checkbox--square",class:{checked:1===t.setDefault}}),n("span",{staticClass:"checkbox-label"},[t._v("设为默认")])]),n("div",{staticClass:"bottom-btn",on:{click:t.editAddress}},[t._v("确定")]),n("van-popup",{attrs:{position:"top"},model:{value:t.showAreaList,callback:function(e){t.showAreaList=e},expression:"showAreaList"}},[n("van-area",{attrs:{value:t.addressInfo.addressId,"area-list":t.areaList,"visible-item-count":5},on:{confirm:t.areaChange,cancel:function(e){t.showAreaList=!1}}})],1)],1)},i=[],a=(n("e7e5"),n("d399")),o=(n("7f7f"),n("a481"),n("8a58"),n("e41f")),r=(n("db2c"),n("1125")),c=n("22ce"),u=n("bf3c4"),d=(n("2b61"),{components:{"van-area":r["a"],"van-popup":o["a"]},name:"address-detail",data:function(){return{id:"",destId:"",addressInfo:{name:"",phone:"",province:"",district:"",city:"",addressId:"",detail:""},checkPhone:!0,setDefault:0,showAreaList:!1,areaList:u["a"],btnLock:!1}},watch:{"addressInfo.name":function(t){var e=this;this.$nextTick(function(){e.addressInfo.name=e.filterInput(t)})},"addressInfo.detail":function(t){var e=this;this.$nextTick(function(){e.addressInfo.detail=e.filterInput(t)})},"addressInfo.phone":function(t){var e=this;this.$nextTick(function(){e.addressInfo.phone=e.filterPhone(t)})}},methods:{filterInput:function(t){return t.replace(/[^\a-\z\A-\Z0-9\u4E00-\u9FA5\.]/g,"")},filterPhone:function(t){return t.replace(/[^0-9]/g,"")},editAddress:function(){var t=this;if(!this.btnLock){if(this.btnLock=!0,this.checkPhoneNum(),!this.addressInfo.name||this.addressInfo.name.length<2||this.addressInfo.name.length>15)return Object(a["a"])("收货人姓名长度需2-15字符~"),void(this.btnLock=!1);if(!this.addressInfo.name||!this.addressInfo.detail||!this.addressInfo.addressId)return Object(a["a"])("请完善地址信息~"),void(this.btnLock=!1);if(!1!==this.checkPhone){var e={id:parseInt(this.id),address:this.addressInfo.detail,cargousrName:this.addressInfo.name,cargoMobile:this.addressInfo.phone,cargoPhone:this.addressInfo.phone,defaultFlag:0==this.$route.query.addressList_length?1:this.setDefault,destCode:this.addressInfo.addressId};c["k"].changeAddrInfo(e).then(function(){Object(a["a"])("保存地址信息成功~"),window.history.go(-1)},function(e){t.btnLock=!1})}else this.btnLock=!1}},checkPhoneNum:function(){var t=/^1[3|4|5|7|8|9][0-9]{9}$/;t.test(this.addressInfo.phone)?this.checkPhone=!0:this.checkPhone=!1},areaChange:function(t){this.addressInfo.province=t[0].name,this.addressInfo.district=t[2].name,this.addressInfo.city=t[1].name,t[2].code?this.addressInfo.addressId=t[2].code:t[1].code?this.addressInfo.addressId=t[1].code:this.addressInfo.addressId=t[0].code,this.showAreaList=!1}},created:function(){var t=this;if(this.id=parseInt(this.$route.query.id)||"",this.destId=parseInt(this.$route.query.destId)||"",this.destId&&void 0!==this.destId){var e={addressId:this.id,destId:this.destId};c["k"].getAddrDetail(e).then(function(e){t.addressInfo.name=e.cargousrName,t.addressInfo.phone=e.cargoPhone,t.addressInfo.addressId=e.districtCode,t.addressInfo.province=e.provinceCnName,t.addressInfo.district=e.districtCnName,t.addressInfo.city=e.cityCnName,t.addressInfo.detail=e.address,t.setDefault=e.defaultFlag})}}}),l=d,h=(n("80f3"),n("2cd5"),n("2877")),f=Object(h["a"])(l,s,i,!1,null,"e2c73788",null);e["default"]=f.exports},db2c:function(t,e,n){"use strict";n("68ef"),n("a526")},e41f:function(t,e,n){"use strict";var s=n("a142"),i=n("6605"),a=Object(s["i"])("popup"),o=a[0],r=a[1];e["a"]=o({mixins:[i["a"]],props:{position:String,transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},render:function(t){var e,n=this;if(this.shouldRender){var s=this.position,i=function(t){return function(){return n.$emit(t)}},a=this.transition||(s?"van-popup-slide-"+s:"van-fade");return t("transition",{attrs:{name:a},on:{afterEnter:i("opened"),afterLeave:i("closed")}},[t("div",{directives:[{name:"show",value:this.value}],class:r((e={},e[s]=s,e))},[this.slots()])])}}})},f253:function(t,e,n){"use strict";var s=n("1988"),i=n("a142"),a=n("db78"),o=n("1128");function r(t){return Array.isArray(t)?t.map(function(t){return r(t)}):"object"===typeof t?Object(o["a"])({},t):t}var c=n("1b10"),u=n("543e"),d=200,l=Object(i["i"])("picker-column"),h=l[0],f=l[1],m=h({props:{valueKey:String,className:String,itemHeight:Number,defaultIndex:Number,initialOptions:Array,visibleItemCount:Number},data:function(){return{startY:0,offset:0,duration:0,startOffset:0,options:r(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length}},methods:{onTouchStart:function(t){this.startY=t.touches[0].clientY,this.startOffset=this.offset,this.duration=0},onTouchMove:function(t){Object(a["c"])(t);var e=t.touches[0].clientY-this.startY;this.offset=Object(i["h"])(this.startOffset+e,-this.count*this.itemHeight,this.itemHeight)},onTouchEnd:function(){if(this.offset!==this.startOffset){this.duration=d;var t=Object(i["h"])(Math.round(-this.offset/this.itemHeight),0,this.count-1);this.setIndex(t,!0)}},adjustIndex:function(t){t=Object(i["h"])(t,0,this.count);for(var e=t;e<this.count;e++)if(!this.isDisabled(this.options[e]))return e;for(var n=t-1;n>=0;n--)if(!this.isDisabled(this.options[n]))return n},isDisabled:function(t){return Object(i["f"])(t)&&t.disabled},getOptionText:function(t){return Object(i["f"])(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight,t!==this.currentIndex&&(this.currentIndex=t,e&&this.$emit("change",t))},setValue:function(t){for(var e=this.options,n=0;n<e.length;n++)if(this.getOptionText(e[n])===t)return this.setIndex(n)},getValue:function(){return this.options[this.currentIndex]}},render:function(t){var e=this,n=this.itemHeight,s=this.visibleItemCount,i={height:n*s+"px"},a=n*(s-1)/2,o={transition:this.duration+"ms",transform:"translate3d(0, "+(this.offset+a)+"px, 0)",lineHeight:n+"px"},r={height:n+"px"};return t("div",{style:i,class:[f(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{style:o},[this.options.map(function(n,s){return t("li",{style:r,class:["van-ellipsis",f("item",{disabled:e.isDisabled(n),selected:s===e.currentIndex})],domProps:{innerHTML:e.getOptionText(n)},on:{click:function(){e.setIndex(s,!0)}}})})])])}}),v=Object(i["i"])("picker"),p=v[0],I=v[1],g=v[2];e["a"]=p({props:Object(s["a"])({},c["a"],{columns:Array,defaultIndex:{type:Number,default:0},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this,e=this.simple?[{values:this.columns}]:this.columns;e.forEach(function(e,n){t.setColumnValues(n,r(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var n=this.getColumn(t);n&&n.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var n=this.getColumn(t);n&&n.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var n=this.children[t];n&&JSON.stringify(n.options)!==JSON.stringify(e)&&(n.options=e,n.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,n){e.setColumnValue(n,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,n){e.setColumnIndex(n,t)})},onConfirm:function(){this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,n=this.itemHeight,s=this.simple?[this.columns]:this.columns,i={height:n+"px"},o={height:n*this.visibleItemCount+"px"},r=this.showToolbar&&t("div",{class:["van-hairline--top-bottom",I("toolbar")]},[this.slots()||[t("div",{class:I("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||g("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",I("title")]},[this.title]),t("div",{class:I("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||g("confirm")])]]);return t("div",{class:I()},[r,this.loading?t("div",{class:I("loading")},[t(u["a"])]):t(),t("div",{class:I("columns"),style:o,on:{touchmove:a["c"]}},[s.map(function(n,s){return t(m,{attrs:{valueKey:e.valueKey,className:n.className,itemHeight:e.itemHeight,defaultIndex:n.defaultIndex||e.defaultIndex,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?n:n.values},on:{change:function(){e.onChange(s)}}})}),t("div",{class:["van-hairline--top-bottom",I("frame")],style:i})])])}})}}]);