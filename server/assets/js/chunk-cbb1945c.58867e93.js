(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cbb1945c"],{"0bfb":function(t,i,e){"use strict";var n=e("cb7c");t.exports=function(){var t=n(this),i="";return t.global&&(i+="g"),t.ignoreCase&&(i+="i"),t.multiline&&(i+="m"),t.unicode&&(i+="u"),t.sticky&&(i+="y"),i}},"1d82":function(t,i,e){},"1f87":function(t,i,e){"use strict";e("68ef"),e("1d82")},"2e74":function(t,i,e){"use strict";var n=e("3130"),s=e.n(n);s.a},3130:function(t,i,e){},3846:function(t,i,e){e("9e1e")&&"g"!=/./g.flags&&e("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:e("0bfb")})},"510b":function(t,i,e){"use strict";var n=e("a142"),s="#07c160",a=e("ad06"),o=Object(n["i"])("steps"),c=o[0],r=o[1];i["a"]=c({props:{icon:String,title:String,active:Number,iconClass:String,description:String,direction:{type:String,default:"horizontal"},activeColor:{type:String,default:s},activeIcon:{type:String,default:"checked"}},data:function(){return{steps:[]}},render:function(t){var i=this.icon,e=this.title,n=this.description,s=this.slots,o=(s("icon")||i)&&t("div",{class:r("icon")},[s("icon")||t(a["a"],{attrs:{name:i},class:this.iconClass})]),c=t("div",{class:r("message")},[t("div",{class:r("title")},[e]),t("div",{class:[r("desc"),"van-ellipsis"]},[n])]);return t("div",{class:r([this.direction])},[(e||n)&&t("div",{class:r("status")},[o,c,s("message-extra")]),t("div",{class:r("items",{alone:!e&&!n})},[s()])])}})},6859:function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.isReady?e("div",{staticClass:"logis",class:[t.direction?"show-more-logis":"hidden-logis"]},[t.type?t._e():[e("div",{staticClass:"fs36B text-center mgT30"},[t._v(t._s(t.title))]),e("p",{staticClass:"title"},[t._v(t._s(t.returnShippingName)+"，"+t._s(t.returnShipCode))])],e("van-steps",{attrs:{direction:"vertical",active:0,"active-color":"#2BA4F3"}},t._l(t.sliceList,function(i,n){return e("van-step",{key:n},[e("h3",[t._v(t._s(i.acceptStation))]),e("p",[t._v(t._s(i.acceptTime))])])})),t.traceList.length>2?e("div",{staticClass:"fs28 text-center pdTb10 show-logis",on:{click:function(i){t.toggle()}}},[e("i",{staticClass:"iconfont icon-xialaxuan",class:{rotatingUp:t.direction,rotatingDown:!t.direction}})]):t._e()],2):t._e()},s=[],a=(e("96cf"),e("3b8d")),o=(e("77f8"),e("dc0f")),c=(e("1f87"),e("510b")),r=(e("c5f6"),e("bf3c"),{props:{data:{},type:{type:Number},title:{type:String,default:"物流信息"},returnShipCode:{type:String,default:""},returnShippingName:{type:String,default:""}},data:function(){return{logis:{},traceList:[],sliceList:[],actionName:"展开",direction:!1,isReady:!1}},components:{"van-steps":c["a"],"van-step":o["a"]},methods:{getLogisInfo:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var i,e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return i={expressCode:this.data.expressCode,logisticCode:this.data.expressNo},t.next=3,this.$post("third-party/getLogis",i);case 3:e=t.sent,this.traceList=e.traceList,this.sliceList=this.traceList.slice(0,2),this.isReady=!0;case 7:case"end":return t.stop()}},t,this)}));function i(){return t.apply(this,arguments)}return i}(),toggle:function(){this.sliceList.length<=2?(this.sliceList=this.traceList,this.actionName="收起",this.direction=!0):(this.sliceList=this.traceList.slice(0,2),this.direction=!1,this.actionName="展开")},initData:function(){this.direction=!0,"kdps"===this.data.shippingWayCode&&this.data.expressNo&&this.data.expressCode?this.getLogisInfo():this.isReady=!1}},created:function(){this.initData()},watch:{data:function(){this.initData()}}}),l=r,v=(e("7865"),e("2877")),u=Object(v["a"])(l,n,s,!1,null,"f5493852",null);i["a"]=u.exports},"6b54":function(t,i,e){"use strict";e("3846");var n=e("cb7c"),s=e("0bfb"),a=e("9e1e"),o="toString",c=/./[o],r=function(t){e("2aba")(RegExp.prototype,o,t,!0)};e("79e5")(function(){return"/a/b"!=c.call({source:"a",flags:"b"})})?r(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!a&&t instanceof RegExp?s.call(t):void 0)}):c.name!=o&&r(function(){return c.call(this)})},"77f8":function(t,i,e){"use strict";e("68ef"),e("ae39")},7865:function(t,i,e){"use strict";var n=e("f058"),s=e.n(n);s.a},ae39:function(t,i,e){},bf3c:function(t,i,e){"use strict";e("ac6a"),e("456d"),e("6b54"),e("4917");var n=e("d225"),s=e("b0b4"),a=function(){function t(){Object(n["a"])(this,t)}return Object(s["a"])(t,null,[{key:"typeOf",value:function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}},{key:"isObject",value:function(t){return"object"===this.typeOf(t)}},{key:"isNumber",value:function(t){return"number"===this.typeOf(t)}},{key:"isArray",value:function(t){return"array"===this.typeOf(t)}},{key:"isBoolean",value:function(t){return"boolean"===this.typeOf(t)}},{key:"isRegexp",value:function(t){return"regexp"===this.typeOf(t)}},{key:"isJson",value:function(t){return"json"===this.typeOf(t)}},{key:"isString",value:function(t){return"string"===this.typeOf(t)}},{key:"isMath",value:function(t){return"math"===this.typeOf(t)}},{key:"isDate",value:function(t){return"date"===this.typeOf(t)}},{key:"isError",value:function(t){return"error"===this.typeOf(t)}},{key:"isEmpty",value:function(t){return null===t||("undefined"===typeof t||(this.isArray(t)||this.isString(t)?0===t.length:this.isObject(t)?0===Object.keys(t).length:void 0))}}]),t}();i["a"]=a},da91:function(t,i,e){"use strict";e.r(i);var n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"invoice-detail"},[e("h5",{staticClass:"status"},[t._v("状态："+t._s(t.invoiceInfo.invStateName))]),e("div",{staticClass:"invoice-wrapper"},[e("label",{staticClass:"invoice-label"},[t._v("发票类型")]),e("div",{staticClass:"invoice-content"},[e("p",[t._v(t._s(t.invoiceInfo.invTypeName))])])]),e("div",{staticClass:"invoice-wrapper"},[e("label",{staticClass:"invoice-label"},[t._v("发票抬头")]),e("div",{staticClass:"invoice-content"},[e("p",[t._v(t._s(t.invoiceInfo.invoiceTitle))])])]),"D_INVTITLETYPE2"===t.invoiceInfo.titleType?e("div",{staticClass:"invoice-wrapper"},[e("label",{staticClass:"invoice-label"},[t._v("纳税识别号")]),e("div",{staticClass:"invoice-content"},[e("p",[t._v(t._s(t.invoiceInfo.invoiceCode))])])]):t._e(),t.showDownImg&&t.invoiceInfo.nnJpgUrl?e("div",{staticClass:"invoice-wrapper"},[e("label",{staticClass:"invoice-label"},[t._v("下载方式1：")]),e("div",{staticClass:"invoice-content",on:{click:t.downLoadInvoice}},[e("div",{staticClass:"download-btn"},[t._v("下载电子发票")])])]):t._e(),t.showDownImg&&t.invoiceInfo.nnJpgUrl?e("div",{staticClass:"invoice-wrapper"},[e("label",{staticClass:"invoice-label"},[t._v("下载方式2：")]),e("div",{staticClass:"invoice-content download2"},[e("div",{directives:[{name:"copy",rawName:"v-copy",value:t.invoiceInfo.nnJpgUrl,expression:"invoiceInfo.nnJpgUrl"}],staticClass:"download-btn"},[t._v("复制链接")]),e("p",{staticClass:"copy-link"},[t._v("复制链接并在浏览器中打开下载")])])]):t._e(),"D_INVOICE_COMMON"===t.invoiceInfo.invType?e("div",{staticClass:"invoice-wrapper"},[e("label",{staticClass:"invoice-label"},[t._v("收货地址")]),e("div",{staticClass:"invoice-content"},[e("p",[t._v("\n                "+t._s(t.invoiceInfo.receiver)+"\n                "),e("span",{staticClass:"phone"},[t._v(t._s(t.invoiceInfo.cargoName))])]),e("p",{staticClass:"address-info"},[t._v(t._s(t.invoiceInfo.receiverCombo))])])]):t._e(),"D_INVOICE_COMMON"===t.invoiceInfo.invType&&1!==t.invoiceInfo.isSendWithOrd?e("div",{staticClass:"invoice-wrapper"},[e("label",{staticClass:"invoice-label"},[t._v("物流信息")]),e("div",{staticClass:"invoice-content"},[e("p",[t._v(t._s(t.invoiceInfo.shipCompanyName||"暂无更多信息")+" "+t._s(t.invoiceInfo.invShipCode||""))])])]):t._e(),1!==t.invoiceInfo.isSendWithOrd?e("logis",{attrs:{data:t.logis}}):t._e(),1===t.invoiceInfo.isSendWithOrd&&"D_INVOICE_COMMON"===t.invoiceInfo.invType&&"D_INV_TRICKT"===t.invoiceInfo.invStateCode?e("P",{staticClass:"tip"},[t._v("温馨提示：发票已与订单商品一同寄出")]):t._e(),t.staticBtn?e("div",{staticClass:"common-bottom-btn"},[e("p",{staticClass:"btn-txt",on:{click:function(i){t.clickStaticBtn()}}},[t._v(t._s(t.staticBtn))])]):t._e()],1)},s=[],a=(e("e7e5"),e("d399")),o=(e("e17f"),e("2241")),c=(e("77f8"),e("dc0f")),r=(e("1f87"),e("510b")),l=e("22ce"),v=e("2b61"),u=e("6859"),f={components:{"van-steps":r["a"],"van-step":c["a"],logis:u["a"]},data:function(){return{billCode:"",invoiceInfo:{},logis:{},showContent:!1,showDownImg:!1,staticBtn:"",isAllowOpenTicketStatus:""}},methods:{initState:function(){switch(this.invoiceInfo.invStateName){case"未审核":this.staticBtn="取消";break;case"已同意":"普通发票"===this.invoiceInfo.invTypeName&&(this.showDownImg=!1),this.showContent=!0;break;case"已拒绝":break;case"已开票":this.showContent=!0,console.log("已开票"),"电子发票"===this.invoiceInfo.invTypeName&&"已开票"===this.invoiceInfo.invStateName&&(this.showDownImg=!0);break;case"已取消":this.staticBtn=this.$route.query.isAllowOpenTicket?"重新申请":null;break}},getDetail:function(){var t=this,i={cookieId:v["a"].get("USER_INFO").cookieId,ctmUsrId:v["a"].get("USER_INFO").usrId,billCode:this.billCode||this.$route.query.billCode};l["e"].getDetail(i).then(function(i){t.invoiceInfo=i,"D_INVOICE_COMMON"===t.invoiceInfo.invType&&0===t.invoiceInfo.isSendWithOrd&&(t.logis={shippingWayCode:"kdps",expressCode:i.shipCompanyCode,expressNo:i.invShipCode}),t.initState(),console.log("vodetail",i)})},clickStaticBtn:function(){var t=this,i=this.staticBtn;if("取消"===i)o["a"].confirm({title:"取消发票",message:"您确定要取消发票吗？"}).then(function(){var i={billCode:t.billCode||t.$route.query.billCode};l["e"].cancelInvoice(i).then(function(i){t.staticBtn="重新申请",t.invoiceInfo.invStateName="已取消"})},function(){Object(a["a"])("您取消了操作~")});else if("重新申请"===i){if(!this.$route.query.isAllowOpenTicketStatus)return void Object(a["a"])("暂时无法申请发票~");this.$router.push({name:"invoiceType",query:{billCode:this.billCode}})}},downLoadInvoice:function(){var t=this.invoiceInfo.nnJpgUrl;window.location.href=t}},created:function(){this.billCode=this.$route.query.billCode||"",this.isAllowOpenTicketStatus=this.$route.query.isAllowOpenTicketStatus||"",this.getDetail()}},d=f,p=(e("2e74"),e("2877")),h=Object(p["a"])(d,n,s,!1,null,"59b520b2",null);i["default"]=h.exports},dc0f:function(t,i,e){"use strict";var n=e("a142"),s=e("ad06"),a=Object(n["i"])("step"),o=a[0],c=a[1];i["a"]=o({beforeCreate:function(){var t=this.$parent.steps,i=this.$parent.slots().indexOf(this.$vnode);t.splice(-1===i?t.length:i,0,this)},beforeDestroy:function(){var t=this.$parent.steps.indexOf(this);t>-1&&this.$parent.steps.splice(t,1)},computed:{status:function(){var t=this.$parent.steps.indexOf(this),i=this.$parent.active;return t<i?"finish":t===i?"process":void 0}},render:function(t){var i,e=this.status,n=this.$parent,a=n.activeIcon,o=n.activeColor,r=n.direction,l="process"===e&&{color:o};return t("div",{class:["van-hairline",c([r,(i={},i[e]=e,i)])]},[t("div",{class:c("title"),style:l},[this.slots()]),t("div",{class:c("circle-container")},["process"!==e?t("i",{class:c("circle")}):this.slots("active-icon")||t(s["a"],{attrs:{name:a},style:{color:o}})]),t("div",{class:c("line")})])}})},f058:function(t,i,e){}}]);