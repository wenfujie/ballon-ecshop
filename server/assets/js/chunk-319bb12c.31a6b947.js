(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-319bb12c"],{"0bfb":function(t,e,s){"use strict";var n=s("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"1b10":function(t,e,s){"use strict";s.d(e,"a",function(){return n});var n={title:String,loading:Boolean,showToolbar:Boolean,cancelButtonText:String,confirmButtonText:String,visibleItemCount:{type:Number,default:5},itemHeight:{type:Number,default:44}}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"28ff":function(t,e,s){"use strict";var n=s("ec26"),i=s.n(n);i.a},"37c8":function(t,e,s){e.f=s("2b4c")},3846:function(t,e,s){s("9e1e")&&"g"!=/./g.flags&&s("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:s("0bfb")})},"3a72":function(t,e,s){var n=s("7726"),i=s("8378"),o=s("2d00"),a=s("37c8"),r=s("86cc").f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||r(e,t,{value:a.f(t)})}},"3d5a":function(t,e,s){},"47cc":function(t,e,s){"use strict";var n=s("3d5a"),i=s.n(n);i.a},"5f5f":function(t,e,s){"use strict";s("68ef"),s("a526")},"67ab":function(t,e,s){var n=s("ca5a")("meta"),i=s("d3f4"),o=s("69a8"),a=s("86cc").f,r=0,c=Object.isExtensible||function(){return!0},u=!s("79e5")(function(){return c(Object.preventExtensions({}))}),l=function(t){a(t,n,{value:{i:"O"+ ++r,w:{}}})},h=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[n].i},f=function(t,e){if(!o(t,n)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[n].w},d=function(t){return u&&p.NEED&&c(t)&&!o(t,n)&&l(t),t},p=t.exports={KEY:n,NEED:!1,fastKey:h,getWeak:f,onFreeze:d}},"6b54":function(t,e,s){"use strict";s("3846");var n=s("cb7c"),i=s("0bfb"),o=s("9e1e"),a="toString",r=/./[a],c=function(t){s("2aba")(RegExp.prototype,a,t,!0)};s("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):r.name!=a&&c(function(){return r.call(this)})},"7bbc":function(t,e,s){var n=s("6821"),i=s("9093").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],r=function(t){try{return i(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?r(t):i(n(t))}},"8a58":function(t,e,s){"use strict";s("68ef"),s("4d75")},"8a81":function(t,e,s){"use strict";var n=s("7726"),i=s("69a8"),o=s("9e1e"),a=s("5ca1"),r=s("2aba"),c=s("67ab").KEY,u=s("79e5"),l=s("5537"),h=s("7f20"),f=s("ca5a"),d=s("2b4c"),p=s("37c8"),m=s("3a72"),v=s("d4c0"),g=s("1169"),b=s("cb7c"),y=s("d3f4"),C=s("6821"),x=s("6a99"),k=s("4630"),w=s("2aeb"),_=s("7bbc"),I=s("11e9"),O=s("86cc"),S=s("0d58"),j=I.f,R=O.f,A=_.f,N=n.Symbol,E=n.JSON,T=E&&E.stringify,$="prototype",P=d("_hidden"),z=d("toPrimitive"),D={}.propertyIsEnumerable,L=l("symbol-registry"),F=l("symbols"),G=l("op-symbols"),H=Object[$],B="function"==typeof N,V=n.QObject,K=!V||!V[$]||!V[$].findChild,W=o&&u(function(){return 7!=w(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a})?function(t,e,s){var n=j(H,e);n&&delete H[e],R(t,e,s),n&&t!==H&&R(H,e,n)}:R,Q=function(t){var e=F[t]=w(N[$]);return e._k=t,e},M=B&&"symbol"==typeof N.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof N},J=function(t,e,s){return t===H&&J(G,e,s),b(t),e=x(e,!0),b(s),i(F,e)?(s.enumerable?(i(t,P)&&t[P][e]&&(t[P][e]=!1),s=w(s,{enumerable:k(0,!1)})):(i(t,P)||R(t,P,k(1,{})),t[P][e]=!0),W(t,e,s)):R(t,e,s)},Y=function(t,e){b(t);var s,n=v(e=C(e)),i=0,o=n.length;while(o>i)J(t,s=n[i++],e[s]);return t},U=function(t,e){return void 0===e?w(t):Y(w(t),e)},q=function(t){var e=D.call(this,t=x(t,!0));return!(this===H&&i(F,t)&&!i(G,t))&&(!(e||!i(this,t)||!i(F,t)||i(this,P)&&this[P][t])||e)},Z=function(t,e){if(t=C(t),e=x(e,!0),t!==H||!i(F,e)||i(G,e)){var s=j(t,e);return!s||!i(F,e)||i(t,P)&&t[P][e]||(s.enumerable=!0),s}},X=function(t){var e,s=A(C(t)),n=[],o=0;while(s.length>o)i(F,e=s[o++])||e==P||e==c||n.push(e);return n},tt=function(t){var e,s=t===H,n=A(s?G:C(t)),o=[],a=0;while(n.length>a)!i(F,e=n[a++])||s&&!i(H,e)||o.push(F[e]);return o};B||(N=function(){if(this instanceof N)throw TypeError("Symbol is not a constructor!");var t=f(arguments.length>0?arguments[0]:void 0),e=function(s){this===H&&e.call(G,s),i(this,P)&&i(this[P],t)&&(this[P][t]=!1),W(this,t,k(1,s))};return o&&K&&W(H,t,{configurable:!0,set:e}),Q(t)},r(N[$],"toString",function(){return this._k}),I.f=Z,O.f=J,s("9093").f=_.f=X,s("52a7").f=q,s("2621").f=tt,o&&!s("2d00")&&r(H,"propertyIsEnumerable",q,!0),p.f=function(t){return Q(d(t))}),a(a.G+a.W+a.F*!B,{Symbol:N});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),st=0;et.length>st;)d(et[st++]);for(var nt=S(d.store),it=0;nt.length>it;)m(nt[it++]);a(a.S+a.F*!B,"Symbol",{for:function(t){return i(L,t+="")?L[t]:L[t]=N(t)},keyFor:function(t){if(!M(t))throw TypeError(t+" is not a symbol!");for(var e in L)if(L[e]===t)return e},useSetter:function(){K=!0},useSimple:function(){K=!1}}),a(a.S+a.F*!B,"Object",{create:U,defineProperty:J,defineProperties:Y,getOwnPropertyDescriptor:Z,getOwnPropertyNames:X,getOwnPropertySymbols:tt}),E&&a(a.S+a.F*(!B||u(function(){var t=N();return"[null]"!=T([t])||"{}"!=T({a:t})||"{}"!=T(Object(t))})),"JSON",{stringify:function(t){var e,s,n=[t],i=1;while(arguments.length>i)n.push(arguments[i++]);if(s=e=n[1],(y(e)||void 0!==t)&&!M(t))return g(e)||(e=function(t,e){if("function"==typeof s&&(e=s.call(this,t,e)),!M(e))return e}),n[1]=e,T.apply(E,n)}}),N[$][z]||s("32e9")(N[$],z,N[$].valueOf),h(N,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},"9b91":function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"scrollview",staticClass:"scrollView"},[s("div",{ref:"content",staticClass:"content"},[t._t("default")],2)])},i=[],o=s("1fba"),a={name:"ScrollView",props:{options:{type:Object,default:null}},data:function(){return{}},methods:{initScroll:function(){var t=this;if(this.scroll)this.scroll.refresh();else{var e={preventDefault:!1,bounce:!1,probeType:3};e=this.options?Object.assign(this.options,e):e,this.scroll=new o["a"](this.$refs.scrollview,e),this.scroll.on("scrollStart",function(){setTimeout(function(){t.scroll.options.preventDefault=!0,t.scroll.refresh()},0)}),this.scroll.on("scrollEnd",function(){t.scroll.options.preventDefault=!1,t.scroll.refresh()})}},getChildrenHeight:function(t){for(var e=t.children,s=0,n=0;n<e.length;n++)s+=e[n].offsetHeight;return s}},created:function(){var t=this;this.$nextTick(function(){t.initScroll()})},mounted:function(){}},r=a,c=(s("28ff"),s("2877")),u=Object(c["a"])(r,n,i,!1,null,null,null);e["a"]=u.exports},"9f8e":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"wrap"},[s("div",{staticClass:"flex-auto overflow-scroll"},[s("div",{staticClass:"goods"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.getImg(t.good.thumb,"75*75"),onerror:"errImg(event)"}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(t.good.goodsName))]),s("div",{staticClass:"price-and-num"},[s("div",{staticClass:"price"},[t._v("￥"+t._s(t._f("fixed2")(t.good.averagePrice)))]),s("div",{staticClass:"num"},[t._v("×"+t._s(t.good.applyNum||0))])])])]),s("div",{staticClass:"content"},[s("div",{staticClass:"group"},[t._m(0),s("div",{staticClass:"action",on:{click:function(e){t.getPostSaleWay()}}},[t._v("\n                    "+t._s(t.way.returnTypeName||"请选择售后类型")+"\n                    "),s("i",{staticClass:"iconfont icon-youfan"})])]),s("div",{staticClass:"group"},[t._m(1),s("div",{staticClass:"action",on:{click:function(e){t.reasonClick()}}},[t._v("\n                    "+t._s(t.reason.reasonName||"请选择售后原因")+"\n                    "),s("i",{staticClass:"iconfont icon-youfan"})])]),0===t.selectedGoods.length&&t.isChange?s("div",{staticClass:"group"},[s("div",{staticClass:"title flex-vcenter pdB20"},[t._v("\n                    换货商品\n                    "),s("span",{staticClass:"red"},[t._v("*")]),t.good.orderFlag?s("span",{staticClass:"fs24 grey66 pdL10"},[t._v("该商品为定制商品,不支持换货")]):t._e()]),t.good.orderFlag?t._e():s("div",{staticClass:"action",on:{click:function(e){t.changeGood()}}},[t._v("\n                    请选择需要换货的商品\n                    "),s("i",{staticClass:"iconfont icon-youfan"})])]):t._e(),t.selectedGoods.length>0&&t.isChange?s("div",{staticClass:"group"},[s("div",{staticClass:"title flex-between"},[t._m(2),t.remainQty>0?s("a",{staticClass:"fs28 mgR30",on:{click:function(e){t.changeGood()}}},[t._v("继续添加")]):t._e()]),t.good.orderFlag?t._e():s("div",{staticClass:"pdTb10 borderB1c"},t._l(t.selectedGoods,function(e,n){return s("div",{key:n,staticClass:"flex-between"},[s("div",{staticClass:"flex-box fs32B Wrap"},[s("div",{staticClass:"flex-vcenter pdL30 pdTb10"},[s("span",{staticClass:"color"},[t._v(t._s(e.colorName))]),s("span",{staticClass:"size mgL30"},[t._v(t._s(e.sizeName))]),s("span",{staticClass:"size mgL30"},[t._v("x"+t._s(e.partAmount))])])]),s("div",{staticClass:"del flex-vcenter mgR30 grey99",on:{click:function(e){t.delGoodFromSelectedGoods(n)}}},[t._v("x")])])}))]):t._e(),t.isRepair?s("div",{staticClass:"group"},[t._m(3),s("div",{staticClass:"num-select"},[s("i",{staticClass:"iconfont icon-jianshao",on:{click:function(e){t.minusForRepair()}}}),s("span",{staticClass:"number"},[t._v(t._s(t.params.amount))]),s("i",{staticClass:"iconfont icon-zengjia",on:{click:function(e){t.increaseForRepair()}}})])]):t._e(),t.isReturn?s("div",{staticClass:"group"},[t._m(4),s("div",{staticClass:"num-select"},[s("i",{staticClass:"iconfont icon-jianshao",on:{click:function(e){t.minusForRepair()}}}),s("span",{staticClass:"number"},[t._v(t._s(t.params.amount))]),s("i",{staticClass:"iconfont icon-zengjia",on:{click:function(e){t.increaseForRepair()}}})])]):t._e(),t.isRefund?s("div",{staticClass:"group"},[t._m(5),s("div",{staticClass:"return-money-wrap"},[s("div",{staticClass:"left"},[s("input",{directives:[{name:"inputfix",rawName:"v-inputfix"},{name:"model",rawName:"v-model",value:t.returnsAmount,expression:"returnsAmount"}],attrs:{placeholder:"请输入退款金额"},domProps:{value:t.returnsAmount},on:{focus:function(e){t.isKeyBoardHide=!1},blur:function(e){t.isKeyBoardHide=!0},input:function(e){e.target.composing||(t.returnsAmount=e.target.value)}}})]),s("div",{staticClass:"right"},[t._v("(最多可退款退 "+t._s(t._f("fixed2")(t.placeholder))+"元)")])])]):t._e(),s("div",{staticClass:"group"},[s("div",{staticClass:"title"},[t._v("售后说明")]),s("div",{staticClass:"description pdL30"},[s("textarea",{directives:[{name:"inputfix",rawName:"v-inputfix"},{name:"model",rawName:"v-model",value:t.params.reasonMemo,expression:"params.reasonMemo"}],attrs:{placeholder:"请输入售后说明",maxlength:"100"},domProps:{value:t.params.reasonMemo},on:{focus:function(e){t.isKeyBoardHide=!1},blur:function(e){t.isKeyBoardHide=!0},input:function(e){e.target.composing||t.$set(t.params,"reasonMemo",e.target.value)}}}),s("span",[t._v(t._s(t.params.reasonMemo.length)+"/100")])])]),s("upload-file",{model:{value:t.images,callback:function(e){t.images=e},expression:"images"}})],1)]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.isKeyBoardHide,expression:"isKeyBoardHide"}],staticClass:"bottom"},[s("debounce",{attrs:{time:2e3,events:"click",throttle:""}},[s("div",{staticClass:"submit",on:{click:function(e){t.submitPostSale()}}},[t._v("提 交")])])],1),s("van-popup",{attrs:{overlay:!0,position:"top"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[s("div",{staticClass:"popup-wrap"},[s("div",{staticClass:"action-icon"},[s("i",{staticClass:"iconfont icon-shanchuguanbi",on:{click:function(e){t.close()}}}),s("i",{staticClass:"iconfont icon-queding",on:{click:function(e){t.confirm()}}})]),s("div",{staticClass:"goods border-bottom-gray padding-tb30"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:t.getImg(t.good.thumb,"75*75"),onerror:"errImg(event)",alt:""}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[t._v(t._s(t.good.goodsName))]),s("div",{staticClass:"price-and-num"},[s("div",{staticClass:"price"},[t._v("￥"+t._s(t._f("fixed2")(t.good.averagePrice)))]),s("div",{staticClass:"num"},[t._v("剩余可换货件数 ×"+t._s(t.remainQty))])])])]),s("div",{staticClass:"group padding-lr30"},[s("div",{staticClass:"title"},[t._v("换货颜色")]),s("div",{staticClass:"img-group"},t._l(t.colorList,function(e,n){return s("a",{key:n},[s("img",{class:{selected:n===t.colorSelectedIndex},attrs:{src:t.getImg(e.url,"60*60"),onerror:"errImg(event)"},on:{click:function(s){t.selectColor(e,n)}}})])}))]),s("div",{staticClass:"group padding-lr30"},[s("div",{staticClass:"title"},[t._v("换货尺码")]),s("div",{staticClass:"size-group"},t._l(t.sizeList,function(e,n){return s("div",{key:n,staticClass:"size",class:{active:n===t.sizeSelectedIndex},on:{click:function(s){t.selectSize(e,n)}}},[t._v(t._s(e.sizeName))])}))]),s("div",{staticClass:"group padding-lr30"},[s("div",{staticClass:"title"},[t._v("换货数量")]),s("div",{staticClass:"num-select"},[s("i",{staticClass:"iconfont icon-jianshao",on:{click:function(e){t.minusForChange()}}}),s("span",{staticClass:"number"},[t._v(t._s(t.skuInfo.partAmount))]),s("i",{staticClass:"iconfont icon-zengjia",on:{click:function(e){t.increaseForChange()}}})])])])]),s("wheelPicker",{attrs:{"label-key":"reasonName","list-data":t.reasons},on:{confirm:t.selectReason},model:{value:t.showReason,callback:function(e){t.showReason=e},expression:"showReason"}}),s("wheelPicker",{attrs:{"label-key":"returnTypeName","list-data":t.ways},on:{confirm:t.selectWay},model:{value:t.showWays,callback:function(e){t.showWays=e},expression:"showWays"}})],1)},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[t._v("\n                    售后类型\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title"},[t._v("\n                    售后原因\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("span",[t._v("换货商品")]),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title",staticStyle:{border:"none"}},[t._v("\n                    返修数量\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title",staticStyle:{border:"none"}},[t._v("\n                    退货数量\n                    "),s("span",{staticClass:"red"},[t._v("*")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"title",staticStyle:{border:"none"}},[t._v("\n                    退款金额\n                    "),s("span",{staticClass:"red"},[t._v("*")])])}],o=(s("4917"),s("a481"),s("456d"),s("ac4d"),s("8a81"),s("ac6a"),s("e7e5"),s("d399")),a=(s("96cf"),s("3b8d")),r=(s("8a58"),s("e41f")),c=s("c46c"),u=s("9b91"),l=s("e632"),h=(s("f8fd"),s("a7ec")),f=s("bf3c"),d={components:{ScrollView:u["a"],uploadFile:c["a"],wheelPicker:l["a"],"van-popup":r["a"]},data:function(){return{show:!1,good:{},way:{},ways:[],showWays:!1,reason:{},reasons:[],showReason:!1,selectedGoods:[],colorList:[],colorSelectedIndex:0,sizeList:[],sizeSelectedIndex:0,returnsAmount:null,isChange:!1,isRepair:!1,isReturn:!1,isRefund:!1,disableUploadfile:!1,params:{amount:1,returnsAmount:null,busCountsCode:this.$route.params.sourceCode,changeReplayCode:null,ordDtId:0,reaSonCode:"",reapplycode:"",reasonMemo:"",returnTypeCode:"",savePictInfo:[],skuInfo:[],skuId:""},skuInfo:{sizeCode:"",sizeName:"",colorCode:"",colorName:"",partAmount:0,ptiPartHdCode:0},images:[],isDisabled:!1,maxQty:1,isKeyBoardHide:!0}},methods:{getRouteParams:function(){return console.log("$routeParams",this.$route.params),f["a"].isEmpty(this.$route.params)?this.Storage.get("paramsForApply"):(this.Storage.set("paramsForApply",this.$route.params),this.$route.params)},initParams:function(){return this.good=this.getRouteParams(),this.params.ordDtId=this.good.saleOrdDtId,this.params.skuId=this.good.skuId,this.params.changeReplayCode=this.good.reApplyCode||null,this.skuInfo.ptiPartHdCode=this.good.goodsCode,this.params},getPostSaleWay:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(f["a"].isEmpty(this.ways)){t.next=3;break}return this.showWays=!0,t.abrupt("return");case 3:return e={saleOrdDtId:this.params.ordDtId},t.next=6,this.$get("postSale/getPostSaleWay",e);case 6:s=t.sent,200===s.status?s.data.returnTypeList.length>0?(this.ways=s.data.returnTypeList||[],this.showWays=!0):Object(o["a"])("暂无售后类型"):this.ways=[];case 8:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),selectWay:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.way=e,this.isChange=!1,this.isRepair=!1,this.isReturn=!1,this.isRefund=!1,this.params.returnTypeCode=e.returnTypeCode,"D_CHANGEPART"===e.returnTypeCode?(this.getSkuInfo(),this.isChange=!0,this.returnsAmount=null):"D_REPAIR"===e.returnTypeCode?(this.isRepair=!0,this.params.amount=1,this.selectedGoods=[],this.returnsAmount=null):"D_RETURNSALES"===e.returnTypeCode?(this.isReturn=!0,this.params.amount=1,this.selectedGoods=[],this.returnsAmount=null):"D_ONLYDRAWBACK"===e.returnTypeCode&&(this.isRefund=!0),t.next=9,this.getReason();case 9:this.reasons=t.sent;case 10:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getReason:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.reason={},e={dictCode:this.params.returnTypeCode},t.next=4,this.$get("postSale/getReasonCodes",e);case 4:return s=t.sent,t.abrupt("return",s.data);case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),reasonClick:function(){this.reasons.length>0&&(this.showReason=!0)},selectReason:function(t){this.reason=t,this.params.reaSonCode=t.reasonCode,this.showReason=!1},changeGood:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.colorList.length){t.next=3;break}return Object(o["a"])("商品已售罄"),t.abrupt("return");case 3:this.remainQty>0?this.skuInfo.partAmount=1:this.skuInfo.partAmount=0,this.show=!0;case 5:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),getSkuInfo:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={busContsCode:"D_BUSCONTS_WSC",billCode:this.$route.params.reApplyCode,goodsCode:this.$route.params.goodsCode,sourceCode:this.$route.params.sourceCode,shopCode:this.$route.params.shopCode},t.next=3,h["a"](e);case 3:s=t.sent,this.colorList=s.colorList,this.sizeList=s.colorList[0].sizeList,this.selectColor(this.colorList[0],0);case 7:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),validGoodsUsable:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,s,n,i,a,r,c,u,l,f;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={busContsCode:"D_BUSCONTS_WSC",billCode:this.$route.params.reApplyCode,goodsCode:this.$route.params.goodsCode,sourceCode:this.$route.params.sourceCode,shopCode:this.$route.params.shopCode},t.next=3,h["a"](e);case 3:s=t.sent,n={},s.colorList.forEach(function(t){n[t.colorCode]={},t.sizeList.forEach(function(e){n[t.colorCode][e.sizeCode]=e.qty})}),i=!0,a=!0,r=!1,c=void 0,t.prev=10,u=this.selectedGoods[Symbol.iterator]();case 12:if(a=(l=u.next()).done){t.next=24;break}if(f=l.value,!(n[f.colorCode]&&n[f.colorCode][f.sizeCode]>=f.partAmount)){t.next=18;break}console.log("partAmount",n[f.colorCode][f.sizeCode]),t.next=21;break;case 18:return Object(o["a"])("商品库存不足"),i=!1,t.abrupt("break",24);case 21:a=!0,t.next=12;break;case 24:t.next=30;break;case 26:t.prev=26,t.t0=t["catch"](10),r=!0,c=t.t0;case 30:t.prev=30,t.prev=31,a||null==u.return||u.return();case 33:if(t.prev=33,!r){t.next=36;break}throw c;case 36:return t.finish(33);case 37:return t.finish(30);case 38:return t.abrupt("return",i);case 39:case"end":return t.stop()}},t,this,[[10,26,30,38],[31,,33,37]])}));function e(){return t.apply(this,arguments)}return e}(),selectSize:function(t,e){this.sizeSelectedIndex=e,this.skuInfo.sizeName=t.sizeName,this.skuInfo.sizeCode=t.sizeCode,this.skuInfo.sizeId=t.sizeId,this.maxQty=t.qty,this.skuInfo.partAmount>=this.maxQty&&(this.skuInfo.partAmount=this.maxQty,this.params.amount=this.maxQty)},selectColor:function(t,e){this.colorSelectedIndex=e,this.skuInfo.colorCode=t.colorCode,this.skuInfo.colorName=t.colorName,this.skuInfo.colorId=t.colorId,this.sizeList=t.sizeList,this.selectSize(this.sizeList[0],0)},increaseForChange:function(){this.skuInfo.partAmount>=this.maxQty?Object(o["a"])("库存不足"):this.skuInfo.partAmount<this.remainQty?(this.skuInfo.partAmount+=1,this.params.amount-=1):this.skuInfo.partAmount>this.remainQty&&Object(o["a"])("申请数量不能大于可换货件数")},minusForChange:function(){this.skuInfo.partAmount-=1,this.skuInfo.partAmount<1&&(this.skuInfo.partAmount=1)},copySku:function(t){var e=this,s={},n=Object.keys(t);return n.forEach(function(t){s[t]=e.skuInfo[t]}),s},confirm:function(){if(console.log("skuInfo",this.skuInfo),this.remainQty>0){var t=this.copySku(this.skuInfo);this.selectedGoods.push(t)}console.log("selectedGoods",this.selectedGoods),this.show=!1},delGoodFromSelectedGoods:function(t){this.selectedGoods.splice(t,1)},close:function(){this.show=!1},increaseForRepair:function(){this.params.amount<this.remainQty?this.params.amount+=1:"D_REPAIR"==this.params.returnTypeCode?Object(o["a"])("返修数量不能大于购买数量！"):"D_RETURNSALES"==this.params.returnTypeCode&&Object(o["a"])("退货数量不能大于购买数量！")},minusForRepair:function(){1!==this.params.amount&&(this.params.amount-=1)},calNumOfChange:function(){var t=0;return this.selectedGoods.forEach(function(e){t+=e.partAmount}),t},submitPostSale:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!f["a"].isEmpty(this.params.returnTypeCode)){t.next=5;break}return Object(o["a"])("请选择售后类型"),t.abrupt("return");case 5:if(!f["a"].isEmpty(this.params.reaSonCode)){t.next=8;break}return Object(o["a"])("请选择售后原因"),t.abrupt("return");case 8:if("D_ONLYDRAWBACK"!=this.way.returnTypeCode){t.next=15;break}if(+this.params.returnsAmount){t.next=12;break}return Object(o["a"])("请填写正确的退款金额！"),t.abrupt("return");case 12:this.params.amount=this.good.applyNum,t.next=31;break;case 15:if("D_CHANGEPART"!==this.way.returnTypeCode){t.next=31;break}if(1!=this.good.orderFlag){t.next=21;break}return Object(o["a"])("定制商品不支持申请换货！"),t.abrupt("return");case 21:if(!f["a"].isEmpty(this.selectedGoods)){t.next=24;break}return Object(o["a"])("请至少选择一件商品!"),t.abrupt("return");case 24:return t.next=26,this.validGoodsUsable();case 26:if(e=t.sent,e){t.next=29;break}return t.abrupt("return");case 29:this.params.skuInfo=this.selectedGoods,this.params.amount=this.calNumOfChange();case 31:return this.params.savePictInfo=this.images,t.next=34,this.$post("postSale/submitApplyWx",this.params);case 34:s=t.sent,200===s.status?(Object(o["a"])(s.data),this.$router.replace("postSaleList")):500===s.status?Object(o["a"])(s.data.errorMsg):Object(o["a"])("提交失败，请勿输入特殊字符");case 36:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),fixedValue:function(t){var e=String(t).match(/^\d*(\.?\d{0,2}$)/g)||"";return e?e[0]:""}},created:function(){this.initParams()},computed:{remainQty:function(){var t=0;return this.selectedGoods.forEach(function(e){t+=e.partAmount}),this.good.applyNum-t},placeholder:function(){return this.good.averagePrice*this.good.applyNum}},watch:{returnsAmount:function(t){var e=this.placeholder||0;if(t>e)this.returnsAmount=e.toFixed(2),this.params.returnsAmount=this.returnsAmount;else{var s="";s=t?this.fixedValue(t)||this.params.returnsAmount:t,this.returnsAmount=s,this.params.returnsAmount=this.returnsAmount}}}},p=d,m=(s("47cc"),s("2877")),v=Object(m["a"])(p,n,i,!1,null,"f8690d4c",null);e["default"]=v.exports},a526:function(t,e,s){},ac4d:function(t,e,s){s("3a72")("asyncIterator")},bf3c:function(t,e,s){"use strict";s("ac6a"),s("456d"),s("6b54"),s("4917");var n=s("d225"),i=s("b0b4"),o=function(){function t(){Object(n["a"])(this,t)}return Object(i["a"])(t,null,[{key:"typeOf",value:function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}},{key:"isObject",value:function(t){return"object"===this.typeOf(t)}},{key:"isNumber",value:function(t){return"number"===this.typeOf(t)}},{key:"isArray",value:function(t){return"array"===this.typeOf(t)}},{key:"isBoolean",value:function(t){return"boolean"===this.typeOf(t)}},{key:"isRegexp",value:function(t){return"regexp"===this.typeOf(t)}},{key:"isJson",value:function(t){return"json"===this.typeOf(t)}},{key:"isString",value:function(t){return"string"===this.typeOf(t)}},{key:"isMath",value:function(t){return"math"===this.typeOf(t)}},{key:"isDate",value:function(t){return"date"===this.typeOf(t)}},{key:"isError",value:function(t){return"error"===this.typeOf(t)}},{key:"isEmpty",value:function(t){return null===t||("undefined"===typeof t||(this.isArray(t)||this.isString(t)?0===t.length:this.isObject(t)?0===Object.keys(t).length:void 0))}}]),t}();e["a"]=o},d4c0:function(t,e,s){var n=s("0d58"),i=s("2621"),o=s("52a7");t.exports=function(t){var e=n(t),s=i.f;if(s){var a,r=s(t),c=o.f,u=0;while(r.length>u)c.call(t,a=r[u++])&&e.push(a)}return e}},e41f:function(t,e,s){"use strict";var n=s("a142"),i=s("6605"),o=Object(n["i"])("popup"),a=o[0],r=o[1];e["a"]=a({mixins:[i["a"]],props:{position:String,transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},render:function(t){var e,s=this;if(this.shouldRender){var n=this.position,i=function(t){return function(){return s.$emit(t)}},o=this.transition||(n?"van-popup-slide-"+n:"van-fade");return t("transition",{attrs:{name:o},on:{afterEnter:i("opened"),afterLeave:i("closed")}},[t("div",{directives:[{name:"show",value:this.value}],class:r((e={},e[n]=n,e))},[this.slots()])])}}})},e632:function(t,e,s){"use strict";var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("van-popup",{attrs:{position:"top","show-toolbar":"true"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[t.show?s("van-picker",{attrs:{"value-key":t.labelKey,"show-toolbar":!0,columns:t.listData,"default-index":t.sIndex},on:{confirm:t.onConfirm,cancel:t.onCancel}}):t._e()],1)},i=[],o=(s("c5f6"),s("5f5f"),s("f253")),a=(s("8a58"),s("e41f")),r={components:{"van-popup":a["a"],"van-picker":o["a"]},props:{value:[Boolean],listData:[Array,Object],labelKey:String,defaultIndex:{type:[String,Number],default:0}},data:function(){return{show:this.value,sIndex:+this.defaultIndex}},methods:{onConfirm:function(t,e){this.sIndex=e,this.$emit("input",!1),this.$emit("confirm",t,e)},onCancel:function(){this.$emit("input",!1)},setDefault:function(t){}},watch:{value:function(t){this.show=t},show:function(t){t||this.$emit("input",t)}}},c=r,u=s("2877"),l=Object(u["a"])(c,n,i,!1,null,"519a47d4",null);e["a"]=l.exports},ec26:function(t,e,s){},f253:function(t,e,s){"use strict";var n=s("1988"),i=s("a142"),o=s("db78"),a=s("1128");function r(t){return Array.isArray(t)?t.map(function(t){return r(t)}):"object"===typeof t?Object(a["a"])({},t):t}var c=s("1b10"),u=s("543e"),l=200,h=Object(i["i"])("picker-column"),f=h[0],d=h[1],p=f({props:{valueKey:String,className:String,itemHeight:Number,defaultIndex:Number,initialOptions:Array,visibleItemCount:Number},data:function(){return{startY:0,offset:0,duration:0,startOffset:0,options:r(this.initialOptions),currentIndex:this.defaultIndex}},created:function(){this.$parent.children&&this.$parent.children.push(this),this.setIndex(this.currentIndex)},destroyed:function(){var t=this.$parent.children;t&&t.splice(t.indexOf(this),1)},watch:{defaultIndex:function(){this.setIndex(this.defaultIndex)}},computed:{count:function(){return this.options.length}},methods:{onTouchStart:function(t){this.startY=t.touches[0].clientY,this.startOffset=this.offset,this.duration=0},onTouchMove:function(t){Object(o["c"])(t);var e=t.touches[0].clientY-this.startY;this.offset=Object(i["h"])(this.startOffset+e,-this.count*this.itemHeight,this.itemHeight)},onTouchEnd:function(){if(this.offset!==this.startOffset){this.duration=l;var t=Object(i["h"])(Math.round(-this.offset/this.itemHeight),0,this.count-1);this.setIndex(t,!0)}},adjustIndex:function(t){t=Object(i["h"])(t,0,this.count);for(var e=t;e<this.count;e++)if(!this.isDisabled(this.options[e]))return e;for(var s=t-1;s>=0;s--)if(!this.isDisabled(this.options[s]))return s},isDisabled:function(t){return Object(i["f"])(t)&&t.disabled},getOptionText:function(t){return Object(i["f"])(t)&&this.valueKey in t?t[this.valueKey]:t},setIndex:function(t,e){t=this.adjustIndex(t)||0,this.offset=-t*this.itemHeight,t!==this.currentIndex&&(this.currentIndex=t,e&&this.$emit("change",t))},setValue:function(t){for(var e=this.options,s=0;s<e.length;s++)if(this.getOptionText(e[s])===t)return this.setIndex(s)},getValue:function(){return this.options[this.currentIndex]}},render:function(t){var e=this,s=this.itemHeight,n=this.visibleItemCount,i={height:s*n+"px"},o=s*(n-1)/2,a={transition:this.duration+"ms",transform:"translate3d(0, "+(this.offset+o)+"px, 0)",lineHeight:s+"px"},r={height:s+"px"};return t("div",{style:i,class:[d(),this.className],on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[t("ul",{style:a},[this.options.map(function(s,n){return t("li",{style:r,class:["van-ellipsis",d("item",{disabled:e.isDisabled(s),selected:n===e.currentIndex})],domProps:{innerHTML:e.getOptionText(s)},on:{click:function(){e.setIndex(n,!0)}}})})])])}}),m=Object(i["i"])("picker"),v=m[0],g=m[1],b=m[2];e["a"]=v({props:Object(n["a"])({},c["a"],{columns:Array,defaultIndex:{type:Number,default:0},valueKey:{type:String,default:"text"}}),data:function(){return{children:[]}},computed:{simple:function(){return this.columns.length&&!this.columns[0].values}},watch:{columns:function(){this.setColumns()}},methods:{setColumns:function(){var t=this,e=this.simple?[{values:this.columns}]:this.columns;e.forEach(function(e,s){t.setColumnValues(s,r(e.values))})},emit:function(t){this.simple?this.$emit(t,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit(t,this.getValues(),this.getIndexes())},onChange:function(t){this.simple?this.$emit("change",this,this.getColumnValue(0),this.getColumnIndex(0)):this.$emit("change",this,this.getValues(),t)},getColumn:function(t){return this.children[t]},getColumnValue:function(t){var e=this.getColumn(t);return e&&e.getValue()},setColumnValue:function(t,e){var s=this.getColumn(t);s&&s.setValue(e)},getColumnIndex:function(t){return(this.getColumn(t)||{}).currentIndex},setColumnIndex:function(t,e){var s=this.getColumn(t);s&&s.setIndex(e)},getColumnValues:function(t){return(this.children[t]||{}).options},setColumnValues:function(t,e){var s=this.children[t];s&&JSON.stringify(s.options)!==JSON.stringify(e)&&(s.options=e,s.setIndex(0))},getValues:function(){return this.children.map(function(t){return t.getValue()})},setValues:function(t){var e=this;t.forEach(function(t,s){e.setColumnValue(s,t)})},getIndexes:function(){return this.children.map(function(t){return t.currentIndex})},setIndexes:function(t){var e=this;t.forEach(function(t,s){e.setColumnIndex(s,t)})},onConfirm:function(){this.emit("confirm")},onCancel:function(){this.emit("cancel")}},render:function(t){var e=this,s=this.itemHeight,n=this.simple?[this.columns]:this.columns,i={height:s+"px"},a={height:s*this.visibleItemCount+"px"},r=this.showToolbar&&t("div",{class:["van-hairline--top-bottom",g("toolbar")]},[this.slots()||[t("div",{class:g("cancel"),on:{click:this.onCancel}},[this.cancelButtonText||b("cancel")]),this.slots("title")||this.title&&t("div",{class:["van-ellipsis",g("title")]},[this.title]),t("div",{class:g("confirm"),on:{click:this.onConfirm}},[this.confirmButtonText||b("confirm")])]]);return t("div",{class:g()},[r,this.loading?t("div",{class:g("loading")},[t(u["a"])]):t(),t("div",{class:g("columns"),style:a,on:{touchmove:o["c"]}},[n.map(function(s,n){return t(p,{attrs:{valueKey:e.valueKey,className:s.className,itemHeight:e.itemHeight,defaultIndex:s.defaultIndex||e.defaultIndex,visibleItemCount:e.visibleItemCount,initialOptions:e.simple?s:s.values},on:{change:function(){e.onChange(n)}}})}),t("div",{class:["van-hairline--top-bottom",g("frame")],style:i})])])}})}}]);