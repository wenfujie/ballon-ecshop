(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-66420a47"],{"0a00":function(t,e,s){"use strict";var o=s("3df9"),i=s.n(o);i.a},"3df9":function(t,e,s){},"650b":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-wrapper"},[s("div",{staticClass:"search-box"},[s("div",{staticClass:"search"},[s("i",{staticClass:"iconfont icon-sousuo"}),s("form",{attrs:{action:"javascript:return true"},on:{submit:function(t){t.preventDefault()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWords,expression:"keyWords"},{name:"focus",rawName:"v-focus"}],ref:"id",attrs:{type:"search",placeholder:t.defaultWords,autocomplete:"off"},domProps:{value:t.keyWords},on:{keyup:function(e){return"button"in e||13===e.keyCode?t.searchGoods(e):null},focus:t.filterKeyWord,input:[function(e){e.target.composing||(t.keyWords=e.target.value)},t.filterKeyWord],blur:t.closeAssociativeWord}})]),s("i",{staticClass:"iconfont icon-guanbi",on:{click:t.clearSearchWord}})]),s("div",{staticClass:"cancel-btn",on:{click:function(e){t.cancel()}}},[t._v("取消")])]),s("ul",{directives:[{name:"show",rawName:"v-show",value:t.associativeWord.length>0,expression:"associativeWord.length >0"}],staticClass:"associative-word-list"},t._l(t.associativeWord,function(e,o){return s("li",{key:o,on:{click:function(s){t.goGoodsList(e)}}},[t._v(t._s(e)+"\n        ")])})),t.historyList.length>0&&t.associativeWord.length<=0?s("div",{staticClass:"keywords-list"},[s("p",{staticClass:"list-title"},[t._v("历史搜索"),s("a",{staticClass:"clean-btn",on:{click:function(e){t.cleanHistory()}}},[t._v("清空")])]),s("ul",t._l(t.historyList,function(e){return s("li",{staticClass:"list-item",on:{click:function(s){t.quickSearch(e)}}},[t._v(t._s(e))])}))]):t._e(),t.hotSearchList.length>0&&t.associativeWord.length<=0?s("div",{staticClass:"keywords-list"},[s("p",{staticClass:"list-title"},[t._v("热门搜索")]),s("ul",t._l(t.hotSearchList,function(e){return e.searchWord&&null!==e.searchWord?s("li",{staticClass:"list-item",on:{click:function(s){t.searchWord(e)}}},[t._v(t._s(e.searchWord))]):t._e()}))]):t._e(),s("a",{attrs:{href:this.url}},[t._v(t._s(t.url))])])},i=[],r=(s("ac6a"),s("a481"),s("2b61")),a=s("22ce"),n={data:function(){return{defaultWords:"",keyWords:"",historyList:[],hotSearchList:[],url:"",associativeWord:[],linkUrl:""}},methods:{getHistoryList:function(){var t=r["a"].get("SEARCH_HISTORY");null===t||void 0===t||""===t||"undefined"===t||"null"===t?(this.historyList=[],r["a"].set("SEARCH_HISTORY","[]")):this.historyList=t.reverse()},searchGoods:function(){console.log("this.defaultWordsdefaultWordsdefaultWordsdefaultWords");var t=this.keyWords?this.keyWords:this.defaultWords;if("请输入搜索词"!==t){var e=r["a"].get("SEARCH_HISTORY");if(null===e||void 0===e||""===e||"undefined"===e||"null"===e){var s=[];s.push(t),r["a"].set("SEARCH_HISTORY",s)}else if(e.length<10){for(var o=!0,i=0;i<e.length;i++)t===e[i]&&(o=!1);o&&(e.push(t),r["a"].set("SEARCH_HISTORY",e))}else{for(var a=!0,n=0;n<e.length;n++)t===e[n]&&(a=!1);a&&(e.splice(0,1),e.push(t),r["a"].set("SEARCH_HISTORY",e))}this.saveKeyWord(t),this.linkUrl?-1===this.linkUrl.indexOf("http://")&&-1===this.linkUrl.indexOf("https://")?this.$router.push(this.linkUrl):window.location.href=this.linkUrl:this.$router.replace("/goods-list?keyWord="+encodeURIComponent(t)),this.keyWords=""}else this.$toast("请输入搜索词")},clearSearchWord:function(){this.keyWords=""},cleanHistory:function(){r["a"].remove("SEARCH_HISTORY"),this.getHistoryList()},quickSearch:function(t){this.keyWords=t,this.saveKeyWord(),this.searchGoods()},searchWord:function(t){if(this.linkUrl="",t.searchWordUrl){var e=t.searchWordUrl;-1===e.indexOf("http://")&&-1===e.indexOf("https://")&&(e=window.location.pathname+"#"+e),window.location.href=e}else this.keyWords=t.searchWord,this.saveKeyWord(),this.searchGoods()},getHotList:function(){var t=this,e={isShop:1};a["d"].getHotGoods(e).then(function(e){e&&e.length?(e.forEach(function(e){if("D_SCPRESET"===e.searchWordTypeCode){var s=(new Date).getTime(),o=new Date(Date.parse(e.invalidTime.replace(/-/g,"/"))).getTime();s<=o&&(t.defaultWords=e.searchWord,t.linkUrl=e.searchWordUrl)}else e.searchWord&&t.hotSearchList.push(e)}),t.defaultWords||(t.defaultWords="请输入搜索词"),t.hotSearchList.length<=0&&t.getRcmdHotWord()):t.getRcmdHotWord()},function(){t.getRcmdHotWord()})},getRcmdHotWord:function(){var t=this;a["d"].getHotWord({}).then(function(e){e.map(function(t){t.searchWord=t.search_terms}),t.hotSearchList=e.slice(0,10)})},filterKeyWord:function(){var t=this;if(this.keyWords=this.keyWords.replace(/(^\s+)|(\s+$)/g,""),this.keyWords){var e={input:this.keyWords};a["d"].getAssociativeWord(e).then(function(e){t.associativeWord=e.slice(0,10)})}else this.associativeWord=[]},saveKeyWord:function(t){if(t||this.keyWords){var e={model:{busContsCode:baseConstant.busContsCode,searchTerms:t||decodeURIComponent(this.keyWords)}};a["d"].createRecordList(e).then(function(){})}},goGoodsList:function(t){this.keyWord=t;var e=r["a"].get("SEARCH_HISTORY");if(null===e||void 0===e||""===e||"undefined"===e||"null"===e){var s=[];s.push(t),r["a"].set("SEARCH_HISTORY",s)}else if(e.length<10){for(var o=!0,i=0;i<e.length;i++)t===e[i]&&(o=!1);o&&(e.push(t),r["a"].set("SEARCH_HISTORY",e))}else{for(var a=!0,n=0;n<e.length;n++)t===e[n]&&(a=!1);a&&(e.splice(0,1),e.push(t),r["a"].set("SEARCH_HISTORY",e))}this.saveKeyWord(t),this.$router.replace("/goods-list?keyWord="+encodeURIComponent(t)),this.associativeWord=[]},closeAssociativeWord:function(){var t=this;setTimeout(function(){t.associativeWord=[]},300)},cancel:function(){this.keyWords?this.$router.replace("/goods-list?keyWord="+encodeURIComponent(this.keyWords)):this.$router.go(-1)}},created:function(){this.keyWords=this.$route.query.keyWord?decodeURIComponent(this.$route.query.keyWord):"",this.getHistoryList(),this.getHotList()},mounted:function(){this.$nextTick(function(){window.scrollTo(0,0)})},watch:{keyWords:function(){this.keyWords||(this.associativeWord=[])}}},c=n,d=(s("0a00"),s("2877")),l=Object(d["a"])(c,o,i,!1,null,"55445eaa",null);e["default"]=l.exports}}]);