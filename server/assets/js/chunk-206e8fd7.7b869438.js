(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-206e8fd7"],{"0bfb":function(t,s,i){"use strict";var e=i("cb7c");t.exports=function(){var t=e(this),s="";return t.global&&(s+="g"),t.ignoreCase&&(s+="i"),t.multiline&&(s+="m"),t.unicode&&(s+="u"),t.sticky&&(s+="y"),s}},"176d":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"goods-list"},[i("div",{staticClass:"search-box",on:{click:function(s){t.goSearch()}}},[i("div",{staticClass:"search"},[i("i",{staticClass:"iconfont icon-sousuo"}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWord,expression:"keyWord"}],staticClass:"default-word",attrs:{placeholder:"搜索商品"},domProps:{value:t.keyWord},on:{focus:t.goSearch,input:function(s){s.target.composing||(t.keyWord=s.target.value)}}}),i("i",{staticClass:"iconfont icon-guanbi"})])]),i("ul",{staticClass:"tab-list"},[i("li",{staticClass:"tab-item",class:{act:"recmSeq"===t.sortParam||""===t.sortParam},on:{click:function(s){t.changeSort("recmSeq")}}},[t._v("设计师推荐")]),i("li",{staticClass:"tab-item",class:{act:"sales"===t.sortParam},on:{click:function(s){t.changeSort("sales")}}},[t._v("销量优先")]),i("li",{staticClass:"tab-item",class:{act:"price"===t.sortParam},on:{click:function(s){t.changeSort("price")}}},[t._v("\n            价格\n            "),i("i",{staticClass:"iconfont icon-xialaxuan",class:{rotate:"ASC"===t.sort}})]),i("li",{staticClass:"tab-item",on:{click:function(s){t.showfifter=!0}}},[t._v("筛选")])]),i("van-list",{attrs:{finished:t.finished,"immediate-check":!1},on:{load:t.loadMore},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[i("div",{staticClass:"list-content"},[i("ul",t._l(t.goodsList,function(s){return i("li",{staticClass:"goods-item",on:{click:function(i){t.goDetail(s)}}},[i("div",{staticClass:"goods-cover"},[i("img",{attrs:{src:t.getImg(s.glbFileUrl,"165*165"),onerror:"errImg(event)",alt:""}})]),1===s.orderFlag?i("div",{staticClass:"diy-icon"}):t._e(),i("p",{staticClass:"goods-name"},[t._v(t._s(s.goodsName))]),i("div",{staticClass:"goods-price"},[i("span",{staticClass:"sale-price"},[t._v("￥"+t._s(t._f("fixed2")(s.salePrice)))]),s.tagPrice&&s.tagPrice>0?i("span",{staticClass:"tag-price"},[t._v("￥"+t._s(t._f("fixed2")(s.tagPrice)))]):t._e()])])}))])]),!t.loading&&t.goodsList.length<1?i("empty",{attrs:{emptyText:"暂无商品~"}}):t._e(),i("van-popup",{attrs:{position:"right","custom-style":"height:1150px;"},on:{close:t.onClose},model:{value:t.showfifter,callback:function(s){t.showfifter=s},expression:"showfifter"}},[i("div",{staticClass:"good-fifter"},[i("div",{staticClass:"fifter-content"},t._l(t.CrumbsName,function(s,e){return i("div",{directives:[{name:"show",rawName:"v-show",value:s.list&&0!=s.list.length,expression:"item.list && item.list.length!=0"}],key:e,staticClass:"content-box"},[i("div",{staticClass:"title",on:{click:function(i){t.showDetails(s)}}},[i("p",[t._v(t._s(s.escrumbsName))]),i("p",{staticClass:"more"},[!0===s.ishow?i("i",{staticClass:"iconfont icon-shangla"}):i("i",{staticClass:"iconfont icon-xialaxuan"})])]),s.ishow?i("div",{staticClass:"contents"},t._l(s.list,function(e,o){return i("p",{key:o,class:{checked:o==s.n},on:{click:function(i){t.choice(e,o,s)}}},[t._v(t._s(e.name))])})):t._e()])}))]),i("div",{staticClass:"fifter-bottom"},[i("span",{staticClass:"reset-btn select-btn",on:{click:function(s){t.reset()}}},[t._v("重置")]),i("span",{staticClass:"sure-btn select-btn",on:{click:t.sure}},[t._v("确定")])])])],1)},o=[],n=(i("e7e5"),i("d399")),a=(i("55dd"),i("6b54"),i("3846"),i("ac6a"),i("a481"),i("2994"),i("2bdd")),r=(i("8a58"),i("e41f")),c=i("22ce"),l=i("2b61"),u=i("5fb8"),d={components:{"van-popup":r["a"],"van-list":a["a"],empty:u["a"]},data:function(){return{userInfo:{},defaultWords:"推荐搜索词",sortParam:"recmSeq",sortParamData:[],goodsList:[],keyWord:"",ptiPartHdId:"",sort:"",showfifter:!1,loading:!0,finished:!1,pageNum:1,pageSize:10,CrumbsName:[],flags:[],crumbs:[],couponId:"",classId:""}},methods:{onClose:function(){this.showfifter=!1},goSearch:function(){var t="/search";this.keyWord&&(t+="?keyWord=".concat(this.keyWord,"&timestampStr=").concat(Date.now())),this.$router.replace(t)},getCrumbsIds:function(){var t=this;if(console.log(this.classId,"this.classId"),this.keyWord||this.classId){var s={busContsCode:baseConstant.busContsCode,shopId:l["a"].get("properties").shopId,pageNum:this.pageNum,pageSize:10,origin:"",filters:JSON.stringify(this.crumbs),keyword:this.keyWord,sortParam:JSON.stringify(this.sortParamData),queryNullBusFlag:1,platformCode:this.classId,orderFlags:JSON.stringify([0]),couponId:this.couponId};c["b"].getCrumbsGoodsIds(s).then(function(s){t.GetCrumbs(s.join(","))},function(){t.GetCrumbs()})}else this.GetCrumbs()},GetCrumbs:function(t,s){var i=this,e={busContsCode:baseConstant.busContsCode,pageSize:0,pageNum:0,platformCode:this.classId,goodsClassIds:t||null};c["b"].getCrumbs(e).then(function(t){t.list.forEach(function(t,s){t.list=[],t.ishow=!1}),i.CrumbsName=t.list}),s&&s()},getDetails:function(){var t=this;if(this.ptiPartHdId){var s={ptiPartHdIds:this.ptiPartHdId};if(this.CrumbsName.forEach(function(t){(!t.list||t.list.length<=0)&&(t.list=[])}),this.CrumbsName.length>0)c["b"].getCrumbsDetail(s).then(function(s){s.length&&!!s.length>0&&t.CrumbsName.forEach(function(t){s.forEach(function(s){t.list.length<=0&&t.escrumbsCode===s.crumbsCode&&(t.list=s.crumbsList)})})});else var i=0,e=setInterval(function(){(t.CrumbsName.length>0||++i>=100)&&(clearInterval(e),c["b"].getCrumbsDetail(s).then(function(s){s.length&&!!s.length>0&&t.CrumbsName.forEach(function(t){s.forEach(function(s){t.list.length<=0&&t.escrumbsCode===s.crumbsCode&&(t.list=s.crumbsList)})})}))},100)}},showDetails:function(t){t.ishow=!t.ishow,this.$set(t,"ishow",t.ishow)},choice:function(t,s,i){var e=this;i.n=s,this.CrumbsName=JSON.parse(JSON.stringify(this.CrumbsName)),this.$set(t,"escrumbsCode",i.escrumbsCode),e.flags.push(t);var o=[],n={};e.flags.forEach(function(t){""!==t.id&&(n.queryField=t.escrumbsCode,n.value=t.id.toString(),n.filterMode=!0,n.operate="AND",o.push(n),n={})});var a=[{operate:"AND",filterList:o}];this.crumbs=a},reset:function(){this.CrumbsName.forEach(function(t){t.n=null}),this.flags=[],this.crumbs=[],this.goodsList=[],this.getGoodsList()},sure:function(){this.showfifter=!1,this.pageNum=1,this.goodsList=[],this.getGoodsList()},changeSort:function(t){"price"!==t&&t===this.sortParam||(this.sortParam!==t&&(this.goodsList=[],this.pageNum=1),this.sortParam=t,"recmSeq"===this.sortParam?this.sortParamData=[{field:"recmSeq",order:"DESC"}]:"sales"===this.sortParam?this.sortParamData=[{field:"sales",order:"DESC"}]:"price"===this.sortParam&&("DESC"===this.sort?(this.sort="ASC",this.pageNum=1,this.sortParamData=[{field:"price",order:"ASC"}],this.goodsList=[]):(this.sort="DESC",this.pageNum=1,this.sortParamData=[{field:"price",order:"DESC"}],this.goodsList=[])),this.getGoodsList(t))},getGoodsList:function(t,s){var i=this,e={usrId:this.userInfo.usrId,busContsCode:baseConstant.busContsCode,companyId:this.userInfo.companyId,shopId:this.userInfo.shopId,pageNum:this.pageNum,pageSize:10,origin:"",filters:JSON.stringify(this.crumbs),keyword:this.$route.query.keyWord||"",sortParam:JSON.stringify(this.sortParamData),queryNullBusFlag:1,orderFlags:JSON.stringify([0,1]),couponId:this.couponId,onlineFlag:1};s&&void 0!==s&&(e.filters=JSON.stringify(s)),this.$route.query.classId&&(e.platformCode=this.$route.query.classId),this.loading=!0,c["d"].getGoodsList(e).then(function(t){console.log(t.ptiPartHdIds,"res.ptiPartHdIds"),i.ptiPartHdId=t.ptiPartHdIds,i.goodsList.push.apply(i.goodsList,t.hits),i.loading=!1,i.goodsList.length>=parseInt(t.pagination.totalCount)||parseInt(i.pageNum)>=parseInt(t.pagination.totalPage)?i.finished=!0:i.finished=!1},function(t){i.loading=!1}).then(function(){i.loading=!1,i.getDetails()})},loadMore:function(){!0!==this.finished?(this.pageNum+=1,this.getGoodsList()):Object(n["a"])("没有更多了~")},goDetail:function(t){1===t.orderFlag?this.$router.push("/goods/web-design?goodsCode="+t.goodsCode):this.$router.push("/goods-detail?goodsCode="+t.goodsCode)}},created:function(){this.userInfo=l["a"].get("USER_INFO"),this.keyWord=this.$route.query.keyWord?decodeURIComponent(this.$route.query.keyWord):"",this.couponId=this.$route.query.couponId?this.$route.query.couponId:"",this.classId=this.$route.query.classId?this.$route.query.classId:"",this.$route.query.rmSize&&l["a"].set("rmSize","-1"==this.$route.query.rmSize?"":this.$route.query.rmSize),this.getGoodsList(),this.getCrumbsIds()}},h=d,f=(i("8d4d"),i("2877")),g=Object(f["a"])(h,e,o,!1,null,"abbe1226",null);s["default"]=g.exports},2836:function(t,s,i){},2994:function(t,s,i){"use strict";i("68ef"),i("c0c2")},"2bdd":function(t,s,i){"use strict";var e=i("a142"),o=i("543e"),n=i("db78"),a=i("023d"),r=Object(e["i"])("list"),c=r[0],l=r[1],u=r[2];s["a"]=c({model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:Number,default:300},direction:{type:String,default:"down"}},mounted:function(){this.scroller=Object(a["c"])(this.$el),this.handler(!0),this.immediateCheck&&this.$nextTick(this.check)},destroyed:function(){this.handler(!1)},activated:function(){this.handler(!0)},deactivated:function(){this.handler(!1)},watch:{loading:function(){this.$nextTick(this.check)},finished:function(){this.$nextTick(this.check)}},methods:{check:function(){if(!(this.loading||this.finished||this.error)){var t=this.$el,s=this.scroller,i=Object(a["e"])(s);if(i&&"none"!==window.getComputedStyle(t).display&&null!==t.offsetParent){var e=this.offset,o=this.direction;n()&&(this.$emit("input",!0),this.$emit("load"))}}function n(){if(t===s){var n=Object(a["d"])(t);if("up"===o)return n<=e;var r=n+i;return s.scrollHeight-r<=e}if("up"===o)return Object(a["d"])(s)-Object(a["a"])(t)<=e;var c=Object(a["a"])(t)+Object(a["e"])(t)-Object(a["a"])(s);return c-i<=e}},clickErrorText:function(){this.$emit("update:error",!1),this.$nextTick(this.check)},handler:function(t){this.binded!==t&&(this.binded=t,(t?n["b"]:n["a"])(this.scroller,"scroll",this.check))}},render:function(t){return t("div",{class:l()},["down"===this.direction&&this.slots(),this.loading&&t("div",{class:l("loading"),key:"loading"},[this.slots("loading")||[t(o["a"],{class:l("loading-icon")}),t("span",{class:l("loading-text")},[this.loadingText||u("loading")])]]),this.finished&&this.finishedText&&t("div",{class:l("finished-text")},[this.finishedText]),this.error&&this.errorText&&t("div",{on:{click:this.clickErrorText},class:l("error-text")},[this.errorText]),"up"===this.direction&&this.slots()])}})},"2f21":function(t,s,i){"use strict";var e=i("79e5");t.exports=function(t,s){return!!t&&e(function(){s?t.call(null,function(){},1):t.call(null)})}},3846:function(t,s,i){i("9e1e")&&"g"!=/./g.flags&&i("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:i("0bfb")})},"49e9":function(t,s,i){"use strict";var e=i("2836"),o=i.n(e);o.a},"55dd":function(t,s,i){"use strict";var e=i("5ca1"),o=i("d8e8"),n=i("4bf8"),a=i("79e5"),r=[].sort,c=[1,2,3];e(e.P+e.F*(a(function(){c.sort(void 0)})||!a(function(){c.sort(null)})||!i("2f21")(r)),"Array",{sort:function(t){return void 0===t?r.call(n(this)):r.call(n(this),o(t))}})},"5fb8":function(t,s,i){"use strict";var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"empty-box"},[i("p",[t._v(t._s(t.emptyText))])])},o=[],n={name:"Empty",props:{emptyText:{type:String,default:"当前暂无数据~"}},data:function(){return{}},methods:{},created:function(){}},a=n,r=(i("49e9"),i("2877")),c=Object(r["a"])(a,e,o,!1,null,"dba818e0",null);s["a"]=c.exports},"6b54":function(t,s,i){"use strict";i("3846");var e=i("cb7c"),o=i("0bfb"),n=i("9e1e"),a="toString",r=/./[a],c=function(t){i("2aba")(RegExp.prototype,a,t,!0)};i("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?c(function(){var t=e(this);return"/".concat(t.source,"/","flags"in t?t.flags:!n&&t instanceof RegExp?o.call(t):void 0)}):r.name!=a&&c(function(){return r.call(this)})},"8a58":function(t,s,i){"use strict";i("68ef"),i("4d75")},"8d4d":function(t,s,i){"use strict";var e=i("cb11"),o=i.n(e);o.a},c0c2:function(t,s,i){},cb11:function(t,s,i){},e41f:function(t,s,i){"use strict";var e=i("a142"),o=i("6605"),n=Object(e["i"])("popup"),a=n[0],r=n[1];s["a"]=a({mixins:[o["a"]],props:{position:String,transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},render:function(t){var s,i=this;if(this.shouldRender){var e=this.position,o=function(t){return function(){return i.$emit(t)}},n=this.transition||(e?"van-popup-slide-"+e:"van-fade");return t("transition",{attrs:{name:n},on:{afterEnter:o("opened"),afterLeave:o("closed")}},[t("div",{directives:[{name:"show",value:this.value}],class:r((s={},s[e]=e,s))},[this.slots()])])}}})}}]);