(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-21828096"],{"0250":function(t,e,o){"use strict";var s=o("f675"),n=o.n(s);n.a},5279:function(t,e,o){},6058:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"qs-goods-header"},[o("ul",{staticClass:"header-ul"},[o("li",{staticClass:"iconfont icon-sousuo",on:{click:function(e){t.goSearch()}}}),o("li",{staticClass:"choosebuy",class:{active:"choosebuy"===t.isActive},on:{click:function(e){t.goChooseBuyCategory()}}},[t._v("品类导购")]),o("li",{staticClass:"scene",class:{active:"scene"===t.isActive},on:{click:function(e){t.goChooseBuyScene()}}},[t._v("场景优选")]),o("li",{staticClass:"iconfont icon-gouwudai shoppingCard",on:{click:function(e){t.goShoppingCart()}}},[this.count>0?o("span",[t._v(t._s(t.count))]):t._e()])])])},n=[],i=(o("a481"),{props:["count","isActive"],methods:{goChooseBuyCategory:function(){this.$router.replace("/choosebuy-category")},goChooseBuyScene:function(){this.$router.replace("/choosebuy-scene")},goSearch:function(){this.$router.push("/search")},goShoppingCart:function(){this.$router.push("/shopping-cart")}}}),c=i,a=(o("0250"),o("2877")),l=Object(a["a"])(c,s,n,!1,null,"13f8e86d",null);e["a"]=l.exports},"8a58":function(t,e,o){"use strict";o("68ef"),o("4d75")},"8d4a":function(t,e,o){"use strict";function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseFloat(t)}o.d(e,"a",function(){return s})},e41f:function(t,e,o){"use strict";var s=o("a142"),n=o("6605"),i=Object(s["i"])("popup"),c=i[0],a=i[1];e["a"]=c({mixins:[n["a"]],props:{position:String,transition:String,overlay:{type:Boolean,default:!0},closeOnClickOverlay:{type:Boolean,default:!0}},render:function(t){var e,o=this;if(this.shouldRender){var s=this.position,n=function(t){return function(){return o.$emit(t)}},i=this.transition||(s?"van-popup-slide-"+s:"van-fade");return t("transition",{attrs:{name:i},on:{afterEnter:n("opened"),afterLeave:n("closed")}},[t("div",{directives:[{name:"show",value:this.value}],class:a((e={},e[s]=s,e))},[this.slots()])])}}})},eb5c:function(t,e,o){"use strict";var s=o("5279"),n=o.n(s);n.a},f675:function(t,e,o){},fa59:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"choosebuy-body"},[o("div",{ref:"clothesWrapper",staticClass:"choosebuy-body-main"},[o("ul",[o("li",{ref:"clothesList"},t._l(t.products,function(e,s){return o("div",{key:s,staticClass:"main-content",on:{click:function(o){t.goDetail(e)}}},[o("img",{attrs:{src:t.getImg(e.goodsFilePath,"750*750"),alt:"",onerror:"errImg(event)"}}),e.isNew?o("div",{staticClass:"main-new-img"}):t._e(),o("div",[o("div",{staticClass:"main-left"},[o("span",{staticClass:"main-money"},[t._v("￥")]),o("span",{staticClass:"main-pay"},[t._v(t._s(e.salePrice||0))]),e.tagPrice&&e.tagPrice>0?o("del",[t._v(t._s(e.tagPrice))]):t._e()]),o("div",{staticClass:"main-right"},[o("span",{staticClass:"iconfont icon-zan",class:[null!==e.collectionDtId?"active icon-zan_":""],on:{click:function(o){o.stopPropagation(),t.collectToggle(e)}}})])])])}))])]),o("van-popup",{staticClass:"like-show",attrs:{"overlay-class":"model-z-index"},model:{value:t.likeShow,callback:function(e){t.likeShow=e},expression:"likeShow"}},[t._v(t._s(t.likeShowContent))])],1)},n=[],i=(o("7f7f"),o("8a58"),o("e41f")),c=o("1fba"),a=o("6058"),l=o("8d4a"),r=o("22ce"),u=o("2b61"),h={name:"choosebuy",filters:{moneyFilter:function(t){return t||(t=0),Object(l["a"])(t)}},data:function(){return{products:[],listHeight:[],scrollY:0,likeShow:!1,likeShowContent:"",shoppingCartCount:""}},components:{GoodsHeader:a["a"],"van-popup":i["a"]},computed:{currentIndex:function(){for(var t=0;t<this.listHeight.length;t++){var e=this.listHeight[t],o=this.listHeight[t+1];if(!o||this.scrollY>=e&&this.scrollY<o)return this._followScroll(t),t}return 0}},created:function(){var t=this;this.getGoodsList(),window.onresize=function(){t._calculateHeaderWidth(),t._calculateHeight()}},methods:{getCartCount:function(){var t=this,e={};r["j"].getCartCount(e).then(function(e){t.shoppingCartCount=e})},backHome:function(){this.$router.push("/index")},selectMenu:function(t,e){if(e._constructed){var o=this.$refs.clothesList,s=o[t];this.clothesScroll.scrollToElement(s,500)}},_calculateHeaderWidth:function(){for(var t=0,e=this.$refs.menuList[0].getBoundingClientRect().left,o=this.$refs.menuWrapper.getElementsByClassName("home")[0].getBoundingClientRect().width,s=0;s<this.products.length;s++)t+=Math.ceil(this.$refs.menuList[s].getBoundingClientRect().width)+e;var n=t-window.screen.width+o;this.$refs.menuWrapper.getElementsByTagName("ul")[0].style.width=n>0?n+"px":"0px"},_initScroll:function(){var t=this;this.meunScroll=new c["a"](this.$refs.menuWrapper,{click:!0,scrollX:!0,scrollY:!1}),this.clothesScroll=new c["a"](this.$refs.clothesWrapper,{click:!0,probeType:3}),this.clothesScroll.on("scroll",function(e){e.y<=0&&(t.scrollY=Math.abs(Math.round(e.y)))})},_calculateHeight:function(){var t=this.$refs.clothesList,e=0;this.listHeight=[],this.listHeight.push(e);for(var o=0;o<t.length;o++){var s=t[o];e+=s.clientHeight,this.listHeight.push(e)}},_followScroll:function(t){var e=this.$refs.menuList,o=e[t];this.meunScroll.scrollToElement(o,500,-200,0)},collectToggle:function(t){var e=this;if(null===t.collectionDtId){var o={usrId:u["a"].get("USER_INFO").usrId,companyId:u["a"].get("USER_INFO").companyId,busContsCode:baseConstant.busContsCode,goodsCode:t.goodsCode,shopId:u["a"].get("USER_INFO").shopId};r["c"].addCollection(o).then(function(t){1===t&&(e.likeShowContent="收藏成功",e.likeShow=!0,e.getGoodsList(),setTimeout(function(){e.likeShow=!1},1e3))})}else{var s={usrId:u["a"].get("USER_INFO").usrId,companyId:u["a"].get("USER_INFO").companyId,goodCodeStr:t.goodsCode,ids:t.collectionDtId};r["c"].deleteCollection(s).then(function(t){e.likeShowContent="取消收藏成功",e.likeShow=!0,e.getGoodsList(),setTimeout(function(){e.likeShow=!1},1e3)})}},goDetail:function(t){1===t.orderFlag?this.$router.push("/goods/web-design?goodsCode="+t.goodsCode):this.$router.push("/goods-detail?goodsCode="+t.goodsCode)},getNavList:function(){var t=this,e={cmsTemplateCode:u["a"].get("TEMPLATE_INFO").cmsTemplateCode,busContsCode:baseConstant.busContsCode,cmsWebCode:pageCode.chooseBuy.children.category};r["b"].getUsrCmsInfoV2(e).then(function(e){for(var o=e.cmsModulepageHdList[0].cmsBackpageDtDtoList,s=[],n=0;n<o.length;n++){var i={};i.title=o[n].cmsBackpageDtName,i.cmsBackpageDtCode=o[n].cmsBackpageDtCode,i.rows=[],s.push(i)}t.products=s},function(t){}).then(function(){t.$nextTick(function(){t.getGoodsList()})})},getGoodsList:function(){var t=this,e={shopId:u["a"].get("USER_INFO").shopId,busContsCode:baseConstant.busContsCode,cmsTemplateCode:u["a"].get("TEMPLATE_INFO").cmsTemplateCode,cmsWebCode:pageCode.index.name,cmsWebItemCode:this.$route.params.className};r["b"].getChoosebuyGoods(e).then(function(e){console.log(e),!e[0].goodsList||e[0].goodsList.length<=0||(t.products=e[0].goodsList)}).then(function(){})}}},d=h,g=(o("eb5c"),o("2877")),f=Object(g["a"])(d,s,n,!1,null,"5b3916e6",null);e["default"]=f.exports}}]);