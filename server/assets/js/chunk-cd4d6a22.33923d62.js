(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd4d6a22"],{a877:function(i,t,e){"use strict";var a=e("b3d3"),s=e.n(a);s.a},b3d3:function(i,t,e){},ec5f:function(i,t,e){"use strict";e.r(t);var a=function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"invoice-type"},[e("div",{staticClass:"invoice-type-container"},[e("div",{staticClass:"invoice-wrapper"},[e("label",[i._v("发票类型")]),e("ul",i._l(i.invoiceList,function(t,a){return e("li",{key:a},[e("span",{staticClass:"select-box",class:{checked:i.invoiceType===t.dictCode}}),e("input",{directives:[{name:"model",rawName:"v-model",value:i.invoiceType,expression:"invoiceType"}],staticClass:"radioInput",attrs:{type:"radio"},domProps:{value:t.dictCode,checked:i._q(i.invoiceType,t.dictCode)},on:{change:function(e){i.invoiceType=t.dictCode}}}),e("p",[i._v(i._s(t.dictName))])])}))]),e("div",{staticClass:"invoice-wrapper"},[e("label",[i._v("发票抬头")]),e("ul",i._l(i.invoiceTitleList,function(t,a){return e("li",{key:a},[e("span",{staticClass:"select-box",class:{checked:i.invoiceTitle===t.dictCode}}),e("input",{directives:[{name:"model",rawName:"v-model",value:i.invoiceTitle,expression:"invoiceTitle"}],staticClass:"radioInput",attrs:{type:"radio"},domProps:{value:t.dictCode,checked:i._q(i.invoiceTitle,t.dictCode)},on:{change:function(e){i.invoiceTitle=t.dictCode}}}),e("p",[i._v(i._s(t.dictName))])])}))])]),e("div",{staticClass:"invoice-content"},["D_INVTITLETYPE2"===i.invoiceTitle?e("ul",{staticClass:"company-title"},[e("li",[i._m(0),e("div",{staticClass:"input-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.companyName,expression:"companyName"},{name:"inputfix",rawName:"v-inputfix"}],attrs:{type:"text",placeholder:"请输入公司名称",maxlength:"20"},domProps:{value:i.companyName},on:{focus:function(t){i.isKeyBoardHide=!1},blur:function(t){i.isKeyBoardHide=!0},input:function(t){t.target.composing||(i.companyName=t.target.value)}}})])]),e("li",[i._m(1),e("div",{staticClass:"input-box"},[e("input",{directives:[{name:"model",rawName:"v-model",value:i.taxpayerNum,expression:"taxpayerNum"},{name:"inputfix",rawName:"v-inputfix"}],attrs:{type:"text",placeholder:"请输入纳税人识别号"},domProps:{value:i.taxpayerNum},on:{focus:function(t){i.isKeyBoardHide=!1},blur:function(t){i.isKeyBoardHide=!0},input:function(t){t.target.composing||(i.taxpayerNum=t.target.value)}}})])])]):i._e(),"D_INVOICE_COMMON"===i.invoiceType?e("div",{staticClass:"address-box"},[e("div",{staticClass:"address-title"},[e("p",{staticClass:"fl"},[i._v("收货地址")]),e("p",{staticClass:"add-btn",on:{click:i.addAddress}},[i._v("新增收货地址")])]),e("ul",{staticClass:"address-list"},i._l(i.addressList,function(t,a){return e("li",{key:a},[e("div",{staticClass:"address-btn-box"},[e("span",{staticClass:"select-box",class:{checked:t.id===i.addrVal}}),e("input",{directives:[{name:"model",rawName:"v-model",value:i.addrVal,expression:"addrVal"}],staticClass:"radioInput",attrs:{name:"address-info",type:"radio"},domProps:{value:t.id,checked:i._q(i.addrVal,t.id)},on:{change:function(e){i.addrVal=t.id}}})]),e("div",{staticClass:"address-info"},[e("div",{staticClass:"address-header"},[e("span",{staticClass:"user-name"},[i._v(i._s(t.cargousrName))]),e("span",{staticClass:"user-phone"},[i._v(i._s(t.cargoPhone))])]),e("div",{staticClass:"address-msg"},[1===t.defaultFlag?e("span",{staticClass:"default-address"},[i._v("[默认地址]")]):i._e(),i._v("\n\t\t\t\t\t\t\t"+i._s(t.destDesc+t.address)+"\n\t\t\t\t\t\t")])])])}))]):i._e()]),e("div",{directives:[{name:"show",rawName:"v-show",value:i.isKeyBoardHide,expression:"isKeyBoardHide"}],staticClass:"common-bottom-btn",on:{click:i.putInvoice}},[e("p",{staticClass:"btn-txt"},[i._v("提交")])])])},s=[function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"title"},[i._v("\n\t\t\t\t\t公司名称"),e("span",{staticClass:"tip"},[i._v("*")])])},function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("p",{staticClass:"title"},[i._v("\n\t\t\t\t\t纳税识别号\n\t\t\t\t\t"),e("span",{staticClass:"tip"},[i._v("*")])])}],n=(e("a481"),e("ac6a"),e("e7e5"),e("d399")),o=e("2b61"),c=e("22ce"),d={data:function(){return{fromPage:"",storageData:{},invoiceList:[],invoiceTitleList:[],invoiceType:"",invoiceTitle:"",companyName:"",taxpayerNum:"",addressList:[],addrVal:"",btnLock:!1,isKeyBoardHide:!0}},methods:{getInvoiceType:function(){var i=this,t={type:"D_INVOICETYPE"};c["e"].getInvoiceType(t).then(function(t){i.invoiceList=t})},getInvoiceTitleType:function(){var i=this,t={type:"D_INVTITLETYPE"};c["e"].getInvoiceType(t).then(function(t){i.invoiceTitleList=t})},getAddrList:function(){var i=this,t={vipUsrId:o["a"].get("USER_INFO").usrId,pageNum:1};c["k"].getAddrList(t).then(function(t){i.addressList=t.list},function(i){})},putInvoice:function(){var i=this;if(!this.btnLock){if(this.btnLock=!0,!this.invoiceType||!this.invoiceTitle)return Object(n["a"])("请先完善开票信息~"),void(this.btnLock=!1);var t={ctmUsrId:o["a"].get("USER_INFO").usrId,cookieId:o["a"].get("USER_INFO").usrId,invoiceTypeCode:this.invoiceType,invoiceTitle:this.invoiceTitle};if("D_INVOICE_ELC"===this.invoiceType){if("D_INVTITLETYPE1"===this.invoiceTitle);else if("D_INVTITLETYPE2"===this.invoiceTitle){if(!this.companyName||!this.taxpayerNum)return this.btnLock=!1,void Object(n["a"])("请完善开票信息~");t.invoiceCompany=this.companyName,t.invoiceTaxAlias=this.taxpayerNum}}else if("D_INVOICE_COMMON"===this.invoiceType)if("D_INVTITLETYPE1"===this.invoiceTitle){if(""===this.addrVal)return Object(n["a"])("请完善开票信息"),void(this.btnLock=!1);this.addressList.forEach(function(e){e.id===i.addrVal&&(t.invoiceAddrId=e.id)})}else if("D_INVTITLETYPE2"===this.invoiceTitle){if(!(this.companyName&&this.taxpayerNum&&this.addrVal))return Object(n["a"])("请完善开票信息~"),void(this.btnLock=!1);this.addressList.forEach(function(e){e.id===i.addrVal&&(t.invoiceAddrId=e.id)}),t.invoiceCompany=this.companyName,t.invoiceTaxAlias=this.taxpayerNum}if(console.log("putData",t),t.invoiceTaxAlias&&t.invoiceTaxAlias.length<6)return Object(n["a"])("请填写正确的纳税识别号~"),void(this.btnLock=!1);if("settlement"===this.fromPage){var e={};this.invoiceList.forEach(function(t){t.dictCode===i.invoiceType&&(e.type=t.dictName)}),this.invoiceTitleList.forEach(function(t){t.dictCode===i.invoiceTitle&&(e.title=t.dictName)}),e.data=t,this.btnLock=!1,console.log(e),o["a"].set("invoiceData",e),window.history.go(-1)}else{var a=this.$route.query.billCode,s=Object.assign(t,{billCode:a});c["e"].putInvoice(s).then(function(t){console.log("invoice",t),Object(n["a"])("发票提交成功"),setTimeout(function(){i.btnLock=!1,i.$router.go(-1)},1e3)},function(t){Object(n["a"])("发票提交失败"),i.btnLock=!1})}}},getPage:function(){this.storageData=o["a"].get("invoiceData")||{},this.storageData.type&&(this.invoiceType=this.storageData.data.invoiceTypeCode,this.invoiceTitle=this.storageData.data.invoiceTitle,this.addrVal=this.storageData.data.invoiceAddrId||"",this.companyName=this.storageData.data.invoiceCompany||"",this.taxpayerNum=this.storageData.data.invoiceTaxAlias||"")},addAddress:function(){var i=this,t={ctmUsrId:o["a"].get("USER_INFO").usrId,cookieId:o["a"].get("USER_INFO").usrId,invoiceTypeCode:this.invoiceType,invoiceTitle:this.invoiceTitle},e={};this.invoiceList.forEach(function(t){t.dictCode===i.invoiceType&&(e.type=t.dictName)}),this.invoiceTitleList.forEach(function(t){t.dictCode===i.invoiceTitle&&(e.title=t.dictName)}),e.data=t,o["a"].set("invoiceData",e),this.$router.push("/address-detail?fromPage=invoice")}},created:function(){this.getInvoiceType(),this.getInvoiceTitleType(),this.getAddrList()},mounted:function(){this.fromPage=this.$route.query.fromPage||"",this.getPage()},watch:{taxpayerNum:function(){this.taxpayerNum=this.taxpayerNum.replace(/[\W]/g,""),this.taxpayerNum.length>20&&(this.taxpayerNum=this.taxpayerNum.slice(0,20))}}},r=d,l=(e("a877"),e("2877")),v=Object(l["a"])(r,a,s,!1,null,"e10fa9c8",null);t["default"]=v.exports}}]);