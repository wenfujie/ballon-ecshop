(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d002774"],{"0bfb":function(t,e,s){"use strict";var n=s("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"2e4f":function(t,e,s){},3846:function(t,e,s){s("9e1e")&&"g"!=/./g.flags&&s("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:s("0bfb")})},"6b54":function(t,e,s){"use strict";s("3846");var n=s("cb7c"),o=s("0bfb"),i=s("9e1e"),a="toString",r=/./[a],u=function(t){s("2aba")(RegExp.prototype,a,t,!0)};s("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?u(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)}):r.name!=a&&u(function(){return r.call(this)})},"7b42":function(t,e,s){"use strict";var n=s("2e4f"),o=s.n(n);o.a},bf3c:function(t,e,s){"use strict";s("ac6a"),s("456d"),s("6b54"),s("4917");var n=s("d225"),o=s("b0b4"),i=function(){function t(){Object(n["a"])(this,t)}return Object(o["a"])(t,null,[{key:"typeOf",value:function(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}},{key:"isObject",value:function(t){return"object"===this.typeOf(t)}},{key:"isNumber",value:function(t){return"number"===this.typeOf(t)}},{key:"isArray",value:function(t){return"array"===this.typeOf(t)}},{key:"isBoolean",value:function(t){return"boolean"===this.typeOf(t)}},{key:"isRegexp",value:function(t){return"regexp"===this.typeOf(t)}},{key:"isJson",value:function(t){return"json"===this.typeOf(t)}},{key:"isString",value:function(t){return"string"===this.typeOf(t)}},{key:"isMath",value:function(t){return"math"===this.typeOf(t)}},{key:"isDate",value:function(t){return"date"===this.typeOf(t)}},{key:"isError",value:function(t){return"error"===this.typeOf(t)}},{key:"isEmpty",value:function(t){return null===t||("undefined"===typeof t||(this.isArray(t)||this.isString(t)?0===t.length:this.isObject(t)?0===Object.keys(t).length:void 0))}}]),t}();e["a"]=i},f8fe:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"share-wrap flex-v-box"},[s("div",{staticClass:"top flex-lave overflow-scroll"},[s("div",{staticClass:"sp"},[s("div",{staticClass:"title"},[s("span",{staticClass:"userName"},[t._v(t._s(t.username))]),s("span",[t._v(" 的订单分享")])]),s("div",{staticClass:"sub-title"},[t._v("都是精心挑选的好货，赶快来看看")]),t._l(t.goodsList,function(e){return s("div",[s("div",{staticClass:"img-box",on:{click:function(s){t.isShelves(e)}}},[s("img",{attrs:{src:t.getShareImg(e.thumb,t.baseInfo.companyId),onerror:"errImg(event)"}})]),s("div",{staticClass:"goodName"},[t._v(t._s(e.goodsName))]),s("div",{staticClass:"price"},[t._v("￥"+t._s(e.costPrice))])])})],2)]),s("div",{staticClass:"bottom flex-box fs36"},[s("div",{staticClass:"left flex-center flex-vbox",on:{click:t.saveShareItem}},[s("i",{staticClass:"iconfont icon-zan2 fs40"}),s("span",{staticClass:"fs24"},[t._v(t._s(t.likesCount))])]),s("div",{staticClass:"flex-lave flex-center bg-blue white",on:{click:t.goToPath}},[t._v("再去逛逛")])])])},o=[],i=(s("ac6a"),s("28a5"),s("a026"),s("bf3c"),s("2b61"),s("22ce")),a={data:function(){return{goodsList:[],username:"",likesCount:0,baseInfo:{},isSaved:!1}},methods:{getShareItem:function(){var t=this,e={usrId:this.baseInfo.usrId,companyId:this.baseInfo.companyId,ownCompanyId:this.baseInfo.companyId,billCode:this.baseInfo.billCode};i["g"].getShareItem(e).then(function(s){s?(t.username=s.buyUsrName,t.likesCount=s.likesCount,t.baseInfo.usrId=s.buyUsrId):t.saveShareInfo(e)})},getGoodsInfo:function(){var t=this,e={busContsCode:baseConstant.busContsCode,usrId:this.baseInfo.usrId,companyId:this.baseInfo.companyId,ownCompanyId:this.baseInfo.companyId,billCode:this.baseInfo.billCode};i["g"].getDetailInfo(e).then(function(e){t.goodsList=t.getGoodsList(e.data.packages)})},getQueryData:function(){var t=window.location.href.split("?")[2],e=t.split("&"),s=e[0].split("=")[1],n=e[1].split("=")[1],o=e[2].split("=")[1];this.baseInfo={billCode:s,companyId:n,ownCompanyId:n,usrId:o},this.getShareItem(),this.getGoodsInfo()},saveShareInfo:function(t){var e=this;i["g"].saveShareInfo(t).then(function(t){e.getShareItem(),console.log("初始化订单分享数据",t)})},saveShareItem:function(){var t=this;this.baseInfo.model={likesCount:1,reprintedCount:1,readCount:1},this.isSaved&&(this.baseInfo.model.likesCount=-1),console.log(this.baseInfo),i["g"].saveShareItem(this.baseInfo).then(function(e){t.isSaved?t.likesCount-=1:t.likesCount+=1,t.isSaved=!t.isSaved})},getGoodsList:function(t){var e=[];return t.forEach(function(t){e=e.concat(t.data.goodsList)}),e},isShelves:function(t){var e=this;this.isShelve(t.goodsCode).then(function(s){s?e.goDetail(t):isAuthorize("/off-shelves",e)})},goDetail:function(t){0===t.orderFlag?isAuthorize("/goods-detail?goodsCode="+t.goodsCode,this):isAuthorize("/goods/web-design?goodsCode="+t.goodsCode,this)},goToPath:function(){isAuthorize("/index",this)}},created:function(){this.getQueryData()}},r=a,u=(s("7b42"),s("2877")),c=Object(u["a"])(r,n,o,!1,null,"73f77b00",null);e["default"]=c.exports}}]);